{
  "comments": [
    {
      "key": {
        "uuid": "8baf30ea_8cca4ba4",
        "filename": "lib/ftl/ftl_io.c",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-04-05T08:05:22Z",
      "side": 1,
      "message": "What\u0027s the point of this change? There\u0027s no iovec for the erase commands.",
      "range": {
        "startLine": 257,
        "startChar": 13,
        "endLine": 257,
        "endChar": 14
      },
      "revId": "e45cd11640bcba0d7187fe55302cf6e70349fbe8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0444d68_2c9f933d",
        "filename": "lib/ftl/ftl_io.c",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-04-05T08:11:17Z",
      "side": 1,
      "message": "We are using ftl_io_update_iovec to update io_pos, In ftl_io_rwb_init we also using iov_cnt \u003d 1. We can change ftl_io_update_iovec implemenation or assume that we have iovec with iov_cnt \u003d 1 in such case.",
      "parentUuid": "8baf30ea_8cca4ba4",
      "range": {
        "startLine": 257,
        "startChar": 13,
        "endLine": 257,
        "endChar": 14
      },
      "revId": "e45cd11640bcba0d7187fe55302cf6e70349fbe8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f24ccb51_bc3b44ea",
        "filename": "lib/ftl/ftl_io.c",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-04-05T10:42:11Z",
      "side": 1,
      "message": "For sure we shouldn\u0027t set iov_cnt \u003d 1 if there\u0027s no iovec tied to that IO. Let\u0027s just change ftl_io_update_iovec to check if iov_cnt \u003e 0. Also, since this function does a bit more then just update iovec\u0027s position, let\u0027s rename it to ftl_io_advance.",
      "parentUuid": "f0444d68_2c9f933d",
      "range": {
        "startLine": 257,
        "startChar": 13,
        "endLine": 257,
        "endChar": 14
      },
      "revId": "e45cd11640bcba0d7187fe55302cf6e70349fbe8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c64accf2_5078bbfe",
        "filename": "lib/ftl/ftl_io.c",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-04-05T11:18:02Z",
      "side": 1,
      "message": "I\u0027m not so sure about it. I\u0027ve looked at submit_erase logic and it is iterating over io-\u003elbk_cnt like submit_read. In my opinion it should rely on io-\u003eiov_cnt and has similar semantics like submit_write because in both cases we are jumping across chunks in band. Using iovec instead lbk_cnt seems more logical. Anyway we have little mess with this erase now. In ftl_band_erase we are iterating over chunks and creating single io erase for each chunk and in submit erase we are iterating over lbk_cnt trying to jump across band chunks. We should either create iovec with the number of chunks in the band in submit erase or allow only for single erase in submit_erase. This is of course subject for another patch.",
      "parentUuid": "f24ccb51_bc3b44ea",
      "range": {
        "startLine": 257,
        "startChar": 13,
        "endLine": 257,
        "endChar": 14
      },
      "revId": "e45cd11640bcba0d7187fe55302cf6e70349fbe8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a67c0474_23caecce",
        "filename": "lib/ftl/ftl_io.c",
        "patchSetId": 1
      },
      "lineNbr": 257,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-04-05T14:36:50Z",
      "side": 1,
      "message": "Ok, iovec here have no sense, but ftl_band_erase /erase_submit need to be changed .",
      "parentUuid": "c64accf2_5078bbfe",
      "range": {
        "startLine": 257,
        "startChar": 13,
        "endLine": 257,
        "endChar": 14
      },
      "revId": "e45cd11640bcba0d7187fe55302cf6e70349fbe8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}