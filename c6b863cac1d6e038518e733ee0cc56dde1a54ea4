{
  "comments": [
    {
      "key": {
        "uuid": "72ed2fd4_1a5a4f55",
        "filename": "include/spdk/blob.h",
        "patchSetId": 18
      },
      "lineNbr": 393,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-04-11T16:55:53Z",
      "side": 1,
      "message": "Is this TODO going to be resolved in this patch?  The API already looks synchronous, so I\u0027m not sure what the issue is.",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "512bac1d_2274fd47",
        "filename": "include/spdk/blob.h",
        "patchSetId": 18
      },
      "lineNbr": 402,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-04-11T20:49:48Z",
      "side": 1,
      "message": "I think these two new functions should operate entirely on blobids, not on spdk_blob *. Maybe the function should be called \"spdk_blob_get_children\".\n\nI\u0027m not entirely convinced that we need to expose this function at all.",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "513deda9_555aa92b",
        "filename": "include/spdk/blob.h",
        "patchSetId": 18
      },
      "lineNbr": 413,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-04-11T16:55:53Z",
      "side": 1,
      "message": "This name seems confusing to me.  I think this returns the blobid of the snapshot that is the base for this blob; maybe spdk_blob_get_backing_snapshot_id() would be clearer (better suggestions welcome).",
      "range": {
        "startLine": 413,
        "startChar": 13,
        "endLine": 413,
        "endChar": 35
      },
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "961db367_1814efd3",
        "filename": "include/spdk/blob.h",
        "patchSetId": 18
      },
      "lineNbr": 413,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-04-11T20:49:48Z",
      "side": 1,
      "message": "Or call it spdk_blob_get_parent.",
      "parentUuid": "513deda9_555aa92b",
      "range": {
        "startLine": 413,
        "startChar": 13,
        "endLine": 413,
        "endChar": 35
      },
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5dd973b_cc65330b",
        "filename": "include/spdk/blob.h",
        "patchSetId": 18
      },
      "lineNbr": 436,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-04-11T16:55:53Z",
      "side": 1,
      "message": "This parameter is not a blob id.",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0f72e477_8b7aafe7",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 18
      },
      "lineNbr": 2078,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-04-11T20:49:48Z",
      "side": 1,
      "message": "I think this can actually be quite a bit simpler. Each blob (optionally) has a pointer to its parent snapshot. If that pointer doesn\u0027t exist, just return while doing nothing. If it does exist, look up the parent in the list. If it exists, increase the ref count on it. If it doesn\u0027t exist, create it and set the ref count to 1.\n\nIt doesn\u0027t matter if it is a snapshot or a clone or whatever.",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c091bb5c_5921d6c2",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 18
      },
      "lineNbr": 2090,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-04-11T16:55:53Z",
      "side": 1,
      "message": "calloc() needs a check for allocation failure.",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f26f4e8_d20e9df0",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 18
      },
      "lineNbr": 2107,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-04-11T16:55:53Z",
      "side": 1,
      "message": "Check for allocation failure here too.",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "019e1f39_2587cc17",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 18
      },
      "lineNbr": 2120,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-04-11T16:55:53Z",
      "side": 1,
      "message": "Check for allocation failure here too.",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5445deb_34467218",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 18
      },
      "lineNbr": 2161,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-04-11T16:55:53Z",
      "side": 1,
      "message": "We need to check that value_len is the right size before we dereference value.  (Don\u0027t assume that on-disk data is valid.)",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a626e26_48ac6fb3",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 18
      },
      "lineNbr": 2460,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-04-11T16:55:53Z",
      "side": 1,
      "message": "Is this change related to the snapshot changes? I think it at least needs an explanation in the commit message, or maybe it should be split out into a separate review.",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "951fe6ff_d1ba640b",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 18
      },
      "lineNbr": 2490,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-04-11T20:49:48Z",
      "side": 1,
      "message": "This was previously an optional step because reading all of the blobs can be quite expensive. I\u0027m not sure we want to force all blobs to be read on every load.",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c4385268_f8004597",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 18
      },
      "lineNbr": 4209,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-04-11T16:55:53Z",
      "side": 1,
      "message": "I think this \"to\" should be removed to make this a valid sentence.",
      "range": {
        "startLine": 4209,
        "startChar": 40,
        "endLine": 4209,
        "endChar": 42
      },
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c734d79_215a2c08",
        "filename": "lib/blob/blobstore.h",
        "patchSetId": 18
      },
      "lineNbr": 107,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-04-11T20:49:48Z",
      "side": 1,
      "message": "I think this can just contain the blob_id, a ref count, and the TAILQ_ENTRY to jump to the next element.",
      "revId": "c6b863cac1d6e038518e733ee0cc56dde1a54ea4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}