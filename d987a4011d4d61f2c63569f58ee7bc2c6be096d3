{
  "comments": [
    {
      "key": {
        "uuid": "383a8e22_bd480571",
        "filename": "lib/nvmf/ctrlr_bdev.c",
        "patchSetId": 4
      },
      "lineNbr": 674,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-01-11T04:54:08Z",
      "side": 1,
      "message": "you will be able to simplify by the following\n\n return nvmf_ctrlr_unregister_all_other_registrants(subsystem, NULL);",
      "range": {
        "startLine": 674,
        "startChar": 0,
        "endLine": 674,
        "endChar": 37
      },
      "revId": "d987a4011d4d61f2c63569f58ee7bc2c6be096d3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "604f052d_03281cfe",
        "filename": "lib/nvmf/ctrlr_bdev.c",
        "patchSetId": 4
      },
      "lineNbr": 674,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-01-11T05:14:47Z",
      "side": 1,
      "message": "sounds good, thanks.",
      "parentUuid": "383a8e22_bd480571",
      "range": {
        "startLine": 674,
        "startChar": 0,
        "endLine": 674,
        "endChar": 37
      },
      "revId": "d987a4011d4d61f2c63569f58ee7bc2c6be096d3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "39698477_17050726",
        "filename": "lib/nvmf/ctrlr_bdev.c",
        "patchSetId": 4
      },
      "lineNbr": 910,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2019-01-10T16:55:58Z",
      "side": 1,
      "message": "I found the following paragraph in the spec:\n  When a reservation is released as a result of actions \n  described in this section and the reservation type is\n  not Write Exclusive or Exclusive Access, a reservation \n  released notification occurs on all controllers in the\n  NVM subsystem that are associated with hosts that are \n  registrants except for controllers that are associated\n  with the host that issued the Reservation Release command\nI couldn\u0027t find much more information about this in the spec other than in section 5.21 in the set_features command description.\n\nDoes this mean that whenever we do this, we need to send a set_features command to all of the other controllers?",
      "revId": "d987a4011d4d61f2c63569f58ee7bc2c6be096d3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e2a0ad5_d5b1badf",
        "filename": "lib/nvmf/ctrlr_bdev.c",
        "patchSetId": 4
      },
      "lineNbr": 910,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-01-11T05:14:47Z",
      "side": 1,
      "message": "Maybe you can refer to may following patches about the reservation notification, there should have a notification for each reservation release.",
      "parentUuid": "39698477_17050726",
      "revId": "d987a4011d4d61f2c63569f58ee7bc2c6be096d3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6fccc59b_411e55ca",
        "filename": "lib/nvmf/ctrlr_bdev.c",
        "patchSetId": 4
      },
      "lineNbr": 957,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2019-01-10T16:55:58Z",
      "side": 1,
      "message": "Could you do TAILQ_REMOVE(\u0026ns-\u003eholder-\u003ens_head, ns, link); and remove line 956?",
      "revId": "d987a4011d4d61f2c63569f58ee7bc2c6be096d3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b47bcf73_12e3a1df",
        "filename": "lib/nvmf/ctrlr_bdev.c",
        "patchSetId": 4
      },
      "lineNbr": 968,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-01-11T04:54:08Z",
      "side": 1,
      "message": "You can do the same Sasha suggested in this patch too.\n\n  status \u003d ...\n  goto exit;\n\nexit:\n  req-\u003ersp-\u003envme_cpl.status.sct \u003d SPDK_NVME_SCT_GENERIC;\n  req-\u003ersp-\u003envme_cpl.status.sc \u003d status;\n  pthread_mutex_unlock(\u0026subsystem-\u003ereservation_lock);\n  return SPDK_NVMF_REQUEST_EXEC_STATUS_COMPLETE;",
      "revId": "d987a4011d4d61f2c63569f58ee7bc2c6be096d3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}