{
  "comments": [
    {
      "key": {
        "uuid": "50e6de6c_135a1f82",
        "filename": "lib/bdev/raid/bdev_raid.c",
        "patchSetId": 6
      },
      "lineNbr": 1407,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-10-09T19:00:08Z",
      "side": 1,
      "message": "Maybe we should remove this line, and wait to set state \u003d RAID_BDEV_STATE_ONLINE until after rc is checked here.  Then we completely avoid changing to ONLINE and then changing it back to CONFIGURING.",
      "revId": "69d18a0429414ae4dbddc8d8c6d99cd54493207a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1d5bca68_87c45192",
        "filename": "lib/bdev/raid/bdev_raid.c",
        "patchSetId": 6
      },
      "lineNbr": 1407,
      "author": {
        "id": 1014600
      },
      "writtenOn": "2018-10-09T23:28:24Z",
      "side": 1,
      "message": "If we set state \u003d ONLINE after spdk_bdev_register() succeeds, then assert(raid_bdev-\u003estate \u003d\u003d RAID_BDEV_STATE_ONLINE) in raid_bdev_create_cb() may failed. Someone may create channel between spdk_bdev_register() and set state \u003d ONLINE, Test-POOL found this error before:\n    hello_bdev: bdev_raid.c:93: raid_bdev_create_cb: Assertion `raid_bdev-\u003estate \u003d\u003d RAID_BDEV_STATE_ONLINE\u0027 failed.\nsee https://ci.spdk.io/spdk/builds/review/6b298c5fe3711925ecc3f40234c5290d3e883e94.1538990702/",
      "parentUuid": "50e6de6c_135a1f82",
      "revId": "69d18a0429414ae4dbddc8d8c6d99cd54493207a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7801e0a2_78688adb",
        "filename": "lib/bdev/raid/bdev_raid.c",
        "patchSetId": 6
      },
      "lineNbr": 1407,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-10-10T00:20:18Z",
      "side": 1,
      "message": "Hi,\n\nexamine operation of GPT bdev got IO channel of the RAID bdev to read from the RAID bdev and raid_bdev_create_cb() was called on behalf of that.\n\nPlease see https://spdk.io/doc/bdev.html#bdev_ug_gpt for GPT bdev. GPT bdev runs to create virtual bdevs corresponding to GPT partitions for every bdev registration.\n\nRead IO by GPT bdev is normal IO. Insertion to the configured list may have to be done before calling spdk_io_device_register() too.",
      "parentUuid": "1d5bca68_87c45192",
      "revId": "69d18a0429414ae4dbddc8d8c6d99cd54493207a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "16c0f3b4_9c2f09d2",
        "filename": "lib/bdev/raid/bdev_raid.c",
        "patchSetId": 6
      },
      "lineNbr": 1407,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-10-15T18:43:06Z",
      "side": 1,
      "message": "Yeah - step of registering will trigger vbdev modules to try to open channels to the RAID device.  Ignore my comment - it needs to be done the way you have it.",
      "parentUuid": "1d5bca68_87c45192",
      "revId": "69d18a0429414ae4dbddc8d8c6d99cd54493207a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}