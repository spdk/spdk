{
  "comments": [
    {
      "key": {
        "uuid": "40c69ffa_aa8df0b0",
        "filename": "app/nvmf_tgt/nvmf_tgt.c",
        "patchSetId": 4
      },
      "lineNbr": 304,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2017-11-29T23:37:09Z",
      "side": 1,
      "message": "I don\u0027t think this is possible. The only way to get here is to advance previously through the state NVMF_TGT_INIT_START_ACCEPTOR, and if spdk_poller_register fails it calls an abort() internally. If you\u0027ve found a way to get here when g_acceptor_poller is NULL, I think we need to fix that path instead of handling it here.",
      "revId": "94a5361d75c1cefd8f75a6fea7bcfebe8b4ae4b6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "af19282a_3fc9e1c5",
        "filename": "app/nvmf_tgt/nvmf_tgt.c",
        "patchSetId": 4
      },
      "lineNbr": 304,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-29T23:44:07Z",
      "side": 1,
      "message": "spdk_nvmf_shutdown_cb() sets g_tgt.state \u003d NVMF_TGT_FINI_STOP_ACCEPTOR without checking for the current state, so presumably, this state can be entered before we are done initializing.",
      "parentUuid": "40c69ffa_aa8df0b0",
      "revId": "94a5361d75c1cefd8f75a6fea7bcfebe8b4ae4b6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a1831e4c_99b44aaf",
        "filename": "app/nvmf_tgt/nvmf_tgt.c",
        "patchSetId": 4
      },
      "lineNbr": 304,
      "author": {
        "id": 1011275
      },
      "writtenOn": "2017-11-30T01:07:38Z",
      "side": 1,
      "message": "Hi Ben/Daniel,\nThis is possible, I already tested and confirmed this is a defect. You can plus ctrlr + c, and that time the state is before acceptor state. \nYou can not postpone ctrl+c after we get into ACCEPTOR STATE. And in some cases, we cannot even get into such state. So still need to handle such case. At least, for shutting down, we cannot suppose we are in NVMF_TGT_FINI_STOP_ACCEPORT STATE.",
      "parentUuid": "af19282a_3fc9e1c5",
      "revId": "94a5361d75c1cefd8f75a6fea7bcfebe8b4ae4b6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}