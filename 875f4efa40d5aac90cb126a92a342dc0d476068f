{
  "comments": [
    {
      "key": {
        "uuid": "f8940f44_e51d3b5c",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 358,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2019-01-11T08:55:09Z",
      "side": 1,
      "message": "From Virtio spec:\n\n  The command VIRTIO_BLK_T_FLUSH_OUT was a synonym for VIRTIO_BLK_T_FLUSH; a driver MUST\n  treat it as a VIRTIO_BLK_T_FLUSH command.",
      "range": {
        "startLine": 358,
        "startChar": 6,
        "endLine": 358,
        "endChar": 24
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "74135a21_7b1e0963",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 358,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-01-14T03:55:10Z",
      "side": 1,
      "message": "There is only VIRTIO_BLK_T_FLUSH command for now.",
      "parentUuid": "f8940f44_e51d3b5c",
      "range": {
        "startLine": 358,
        "startChar": 6,
        "endLine": 358,
        "endChar": 24
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "01eb190e_198a4058",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 358,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2019-01-14T10:22:20Z",
      "side": 1,
      "message": "Changpeng, please either change the spec or be compliant with it. How do you expect us to review this patch?",
      "parentUuid": "74135a21_7b1e0963",
      "range": {
        "startLine": 358,
        "startChar": 6,
        "endLine": 358,
        "endChar": 24
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f6096096_2c3093f4",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 358,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-01-15T01:04:00Z",
      "side": 1,
      "message": "Putting VIRTIO_BLK_T_FLUSH here is correct, why I should change the spec or code?",
      "parentUuid": "01eb190e_198a4058",
      "range": {
        "startLine": 358,
        "startChar": 6,
        "endLine": 358,
        "endChar": 24
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90b95e97_64a91a16",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 358,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2019-01-15T06:28:12Z",
      "side": 1,
      "message": "Are we talking that, it needs to cover the below case:\n\ncase VIRTIO_BLK_T_FLUSH_OUT:\ncase VIRTIO_BLK_T_FLUSH:\n     .....\n     break;",
      "parentUuid": "f6096096_2c3093f4",
      "range": {
        "startLine": 358,
        "startChar": 6,
        "endLine": 358,
        "endChar": 24
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c9d3d465_14c1685e",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 358,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-01-15T06:41:31Z",
      "side": 1,
      "message": "There is no VIRTIO_BLK_T_FLUSH_OUT for now, we can\u0027t do that.",
      "parentUuid": "90b95e97_64a91a16",
      "range": {
        "startLine": 358,
        "startChar": 6,
        "endLine": 358,
        "endChar": 24
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b18c8b5e_ff7fbde7",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 358,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2019-01-15T06:55:02Z",
      "side": 1,
      "message": "Got it. Thanks for making it clear. So this is to align with the existing virtio 0.95 spec spec and later the new virtio 1.0 spec has the FLUSH_OUT command which is same as FLUSH command. Is this understanding correct? What if we have the virtio spec related information in the commit message? Thanks.",
      "parentUuid": "c9d3d465_14c1685e",
      "range": {
        "startLine": 358,
        "startChar": 6,
        "endLine": 358,
        "endChar": 24
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "17ed901e_16bea318",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 360,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2019-01-11T08:55:09Z",
      "side": 1,
      "message": "Incoming Virtio 1.1 spec say:\n\n  5.2.6.1 Driver Requirements: Device Operation\n  ...\n  A driver MUST set sector to 0 for a VIRTIO_BLK_T_FLUSH request. A driver SHOULD NOT include any\n  data in a VIRTIO_BLK_T_FLUSH request.\n\nVirtio 1.0 is not mentioning \"sector\" field at all for VIRTIO_BLK FLUSH. What is the right behavior?",
      "range": {
        "startLine": 360,
        "startChar": 2,
        "endLine": 360,
        "endChar": 35
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4e36ad00_bceb2159",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 360,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-01-14T03:55:10Z",
      "side": 1,
      "message": "I looked into the Linux Guest driver, it will set \"sector\" field for flush command, of course, flush in the specification means flush the whole disk, so it makes no difference here.",
      "parentUuid": "17ed901e_16bea318",
      "range": {
        "startLine": 360,
        "startChar": 2,
        "endLine": 360,
        "endChar": 35
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "756ee707_b55513fc",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 360,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2019-01-14T10:22:20Z",
      "side": 1,
      "message": "Virtio 1.0 actually does mention this field - it shouldn\u0027t be used for flush.\n\n\u003e 5.2.6 Device Operation\n\u003e ...\n\u003e The sector number indicates the offset (multiplied by 512) where the read or write is to occur. This field is unused and set to 0 for scsi packet commands and for flush commands.\n\nIf the linux driver really sets the sector field, then I\u0027d guess the code here in SPDK is fine, but needs to be documented. Please mention we\u0027re basing on Linux implementation, which is not compliant with the spec.",
      "parentUuid": "4e36ad00_bceb2159",
      "range": {
        "startLine": 360,
        "startChar": 2,
        "endLine": 360,
        "endChar": 35
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "31270bde_a0cccdfa",
        "filename": "lib/vhost/vhost_blk.c",
        "patchSetId": 3
      },
      "lineNbr": 360,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-01-15T01:04:00Z",
      "side": 1,
      "message": "sounds good to me.",
      "parentUuid": "756ee707_b55513fc",
      "range": {
        "startLine": 360,
        "startChar": 2,
        "endLine": 360,
        "endChar": 35
      },
      "revId": "875f4efa40d5aac90cb126a92a342dc0d476068f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}