{
  "comments": [
    {
      "key": {
        "uuid": "10dc2497_ee1d7fa1",
        "filename": "include/spdk/nvme_spec.h",
        "patchSetId": 2
      },
      "lineNbr": 356,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-19T19:50:10Z",
      "side": 1,
      "message": "I\u0027d suggest moving this to muser.c.",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec26c759_71046f26",
        "filename": "include/spdk/nvme_spec.h",
        "patchSetId": 2
      },
      "lineNbr": 359,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-19T19:50:10Z",
      "side": 1,
      "message": "It doesn\u0027t look like SQ0TBDL/CQ0HDBL are used anywhere.  I think this can be removed.",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b618cb9b_bcef34f8",
        "filename": "include/spdk/nvme_spec.h",
        "patchSetId": 2
      },
      "lineNbr": 365,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-19T19:50:10Z",
      "side": 1,
      "message": "I would suggest moving this to muser.c.",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dd73092f_5fab14a6",
        "filename": "include/spdk/nvme_spec.h",
        "patchSetId": 2
      },
      "lineNbr": 392,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-19T19:50:10Z",
      "side": 1,
      "message": "I think you can remove this.",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e30ed903_075aa9b1",
        "filename": "include/spdk/nvme_spec.h",
        "patchSetId": 2
      },
      "lineNbr": 479,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-19T19:50:10Z",
      "side": 1,
      "message": "I don\u0027t think these changes are actually used anywhere in the muser code.  Or at least I was able to revert this part of the patch, and muser still built fine.",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f685c1d7_f9178582",
        "filename": "include/spdk/nvmf_spec.h",
        "patchSetId": 2
      },
      "lineNbr": 220,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-19T19:50:10Z",
      "side": 1,
      "message": "I pushed a patch that I think will help with this:\n\nhttps://review.gerrithub.io/c/spdk/spdk/+/478496\n\nI wanted to base whatever we do around nqn (NVMe Qualified Name) - not subnqn.  Since we use nqns in other places - i.e. the hostnqn that\u0027s also in this data structure, as well as other places in nvme_spec.h and the FC code.\n\nThis requires a few changes to your muser.c code, but it wasn\u0027t too bad.",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d023ca25_66788feb",
        "filename": "lib/nvme/nvme_ctrlr.c",
        "patchSetId": 2
      },
      "lineNbr": 3164,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-12-23T05:46:35Z",
      "side": 1,
      "message": "I will submit a separate patch for this API.",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f7db61c_9ad45afe",
        "filename": "lib/nvme/nvme_transport.c",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1011275
      },
      "writtenOn": "2019-12-25T07:53:24Z",
      "side": 1,
      "message": "nvme_muser.c is missing. It means that Nutanix will upstream it?",
      "range": {
        "startLine": 56,
        "startChar": 54,
        "endLine": 56,
        "endChar": 79
      },
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3980cb77_53f3c469",
        "filename": "lib/nvmf/ctrlr.c",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-19T19:50:10Z",
      "side": 1,
      "message": "is this required?  I\u0027m guessing this was used to try for debug purposes, but in general we shouldn\u0027t need to zero the buffer before freeing it.",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1fb4f044_cedcbbaa",
        "filename": "lib/nvmf/muser.c",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-12-23T06:13:17Z",
      "side": 1,
      "message": "18 ?",
      "range": {
        "startLine": 60,
        "startChar": 15,
        "endLine": 60,
        "endChar": 17
      },
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2065603_1de20700",
        "filename": "lib/nvmf/muser.c",
        "patchSetId": 2
      },
      "lineNbr": 135,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-12-23T06:13:17Z",
      "side": 1,
      "message": "maybe better to define submission queue and completion queue separately.",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58356497_d3804e5e",
        "filename": "lib/nvmf/muser.c",
        "patchSetId": 2
      },
      "lineNbr": 943,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-12-23T06:13:17Z",
      "side": 1,
      "message": "I already added this part to nvme_spec.h.",
      "range": {
        "startLine": 904,
        "startChar": 0,
        "endLine": 943,
        "endChar": 82
      },
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c86201c5_4e854359",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 2
      },
      "lineNbr": 721,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-19T19:50:10Z",
      "side": 1,
      "message": "This gets set just below, if spdk_nvmf_transport_poll_group_add() succeeds.  I\u0027m guessing we shouldn\u0027t do this here, and just rely on the spdk_nvmf_qpair_set_state() call below.",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af7f101c_4963a8a6",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 2
      },
      "lineNbr": 721,
      "author": {
        "id": 1016781
      },
      "writtenOn": "2019-12-20T09:45:08Z",
      "side": 1,
      "message": "it is because connect request in transport poll_group_add which needs to have qpair active\npossible solution is to send message with connect to unwind the stack and relay on set_state below",
      "parentUuid": "c86201c5_4e854359",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a8db5e3b_b12fb838",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 2
      },
      "lineNbr": 721,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-20T16:57:24Z",
      "side": 1,
      "message": "Got it.  So we need this to be able to send the fake fabrics CONNECT command.\n\nLet\u0027s try to find a more elegant way to handle this.  Things like muser shouldn\u0027t have to construct a fake fabrics command - we just haven\u0027t needed an alternate solution until now.",
      "parentUuid": "af7f101c_4963a8a6",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f23abed8_3692704c",
        "filename": "lib/nvmf/transport.h",
        "patchSetId": 2
      },
      "lineNbr": 230,
      "author": {
        "id": 1011275
      },
      "writtenOn": "2019-12-25T07:50:29Z",
      "side": 1,
      "message": "I am confused with this in NVMe-oF target side. There is no specification to describe muser transport in NVMe-oF spec? Should we really need this transport?\n\nCould we do not support this? But only support muser transport in NVMe host side, and the NVMe muser transport can be wrapped in bdev nvme and connect to vhost NVMe? \n\nOr does it mean with this muser transport in both host and target side, then we can replace vhost NVMe solution in vhost application(blk/SCSI/NVMe).",
      "range": {
        "startLine": 230,
        "startChar": 0,
        "endLine": 230,
        "endChar": 69
      },
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47666f24_c7292154",
        "filename": "lib/vhost/vhost_nvme.c",
        "patchSetId": 2
      },
      "lineNbr": 251,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-19T19:50:10Z",
      "side": 1,
      "message": "We should make this function more generally usable as part of a separate patch.  I think we (Intel) can help with that.  Changpeng - could you take a look?  I see Thanos put the implementation in nvme_ctrlr.c, but I think this is really target functionality, not host functionality.\n\nMaybe we put this somewhere in lib/nvmf instead?  That would make vhost_nvme depend on nvmf, but I think I\u0027m OK with that (probably vhost_nvme will go away long term once nvmf_muser is ready).",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "25b1302d_183a06e2",
        "filename": "lib/vhost/vhost_nvme.c",
        "patchSetId": 2
      },
      "lineNbr": 251,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-12-23T05:46:35Z",
      "side": 1,
      "message": "Agreed, I will move this part to lib/nvmf library for now, and I\u0027m thinking if we can move most of the code in nvmf/ctrlr.c nvme/ctrlr_bdev.c to a separate directory such as emulated_nvme, in case we may build a muser target in future to serve NVMe/Virtio_BLK/SCSI PCI interfaces.  For now I think lib/nvmf is the right place.",
      "parentUuid": "47666f24_c7292154",
      "revId": "764761637cbe84a1fe5698a47f9e216dcbe23b67",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}