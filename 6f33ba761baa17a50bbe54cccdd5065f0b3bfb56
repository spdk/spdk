{
  "comments": [
    {
      "key": {
        "uuid": "f482e1ae_90769116",
        "filename": "test/unit/lib/blobfs/blobfs_bdev.c/blobfs_bdev_ut.c",
        "patchSetId": 5
      },
      "lineNbr": 146,
      "author": {
        "id": 1011712
      },
      "writtenOn": "2019-11-04T18:39:42Z",
      "side": 1,
      "message": "You may try to add the unload operation here like:\ncb_fn(cb_arg);",
      "revId": "6f33ba761baa17a50bbe54cccdd5065f0b3bfb56",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d8ee444_cbbe9ca7",
        "filename": "test/unit/lib/blobfs/blobfs_bdev.c/blobfs_bdev_ut.c",
        "patchSetId": 5
      },
      "lineNbr": 146,
      "author": {
        "id": 1016244
      },
      "writtenOn": "2019-11-05T02:49:44Z",
      "side": 1,
      "message": "I don\u0027t think we should put the callback here.\nbecause spdk_fs_load will call the callback and then umount bdev.\nbut if you add unmount here , in method _blobfs_bdev_mount_fuse_start(spdk_fs_load callback function) still invoke ctx-\u003ecb_args after spdk_blobfs_fuse_start method.",
      "parentUuid": "f482e1ae_90769116",
      "revId": "6f33ba761baa17a50bbe54cccdd5065f0b3bfb56",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "adc3aa44_b400ad26",
        "filename": "test/unit/lib/blobfs/blobfs_bdev.c/blobfs_bdev_ut.c",
        "patchSetId": 5
      },
      "lineNbr": 146,
      "author": {
        "id": 1011712
      },
      "writtenOn": "2019-11-05T08:33:03Z",
      "side": 1,
      "message": "yes, directly calling cb_fn(cb_arg) is not a correct way, since unmount_cb should be one deferred operation.\nSo like we synced: defining a global variable, and recording ctx for deferred calling blobfs_bdev_umount. That should be the right way.",
      "parentUuid": "7d8ee444_cbbe9ca7",
      "revId": "6f33ba761baa17a50bbe54cccdd5065f0b3bfb56",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bcb961eb_e4f64e03",
        "filename": "test/unit/lib/blobfs/blobfs_bdev.c/blobfs_bdev_ut.c",
        "patchSetId": 5
      },
      "lineNbr": 146,
      "author": {
        "id": 1016244
      },
      "writtenOn": "2019-11-05T10:55:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "adc3aa44_b400ad26",
      "revId": "6f33ba761baa17a50bbe54cccdd5065f0b3bfb56",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "726dff85_54584d2b",
        "filename": "test/unit/lib/blobfs/blobfs_bdev.c/blobfs_bdev_ut.c",
        "patchSetId": 5
      },
      "lineNbr": 320,
      "author": {
        "id": 1011712
      },
      "writtenOn": "2019-11-04T18:39:42Z",
      "side": 1,
      "message": "The reason why ctx is not freed is that mount function only does fs_load. So a better way is to find somewhere to do the unload operation.",
      "range": {
        "startLine": 320,
        "startChar": 1,
        "endLine": 320,
        "endChar": 80
      },
      "revId": "6f33ba761baa17a50bbe54cccdd5065f0b3bfb56",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f045749_bfe97b0c",
        "filename": "test/unit/lib/blobfs/blobfs_bdev.c/blobfs_bdev_ut.c",
        "patchSetId": 5
      },
      "lineNbr": 320,
      "author": {
        "id": 1016244
      },
      "writtenOn": "2019-11-05T02:49:44Z",
      "side": 1,
      "message": "changed free -\u003e unload. \nand i think we still need a flag val to make sure when we need unmount ctx. because others unit cases(which is not mount method) invoked spdk_fs_load and they have unload callback.",
      "parentUuid": "726dff85_54584d2b",
      "range": {
        "startLine": 320,
        "startChar": 1,
        "endLine": 320,
        "endChar": 80
      },
      "revId": "6f33ba761baa17a50bbe54cccdd5065f0b3bfb56",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3118b4d9_3848f1eb",
        "filename": "test/unit/lib/blobfs/blobfs_bdev.c/blobfs_bdev_ut.c",
        "patchSetId": 5
      },
      "lineNbr": 320,
      "author": {
        "id": 1016244
      },
      "writtenOn": "2019-11-05T10:55:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9f045749_bfe97b0c",
      "range": {
        "startLine": 320,
        "startChar": 1,
        "endLine": 320,
        "endChar": 80
      },
      "revId": "6f33ba761baa17a50bbe54cccdd5065f0b3bfb56",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}