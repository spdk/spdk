{
  "comments": [
    {
      "key": {
        "uuid": "9d64d0ae_d67d193e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2019-07-01T20:11:31Z",
      "side": 1,
      "message": "\"resize event notification\" might be clearer",
      "revId": "27fb4d31e2f8e6fdafa4a93c79b905955d9db4b5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2281516b_10be6c78",
        "filename": "include/spdk/bdev.h",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2019-07-01T20:11:31Z",
      "side": 1,
      "message": "might be good to put a comment for each struct in the union that includes the specific event type that the strut is here for",
      "revId": "27fb4d31e2f8e6fdafa4a93c79b905955d9db4b5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dcc4bb26_3ef3c35c",
        "filename": "include/spdk/bdev.h",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2019-07-11T12:36:10Z",
      "side": 1,
      "message": "That a good idea.",
      "parentUuid": "2281516b_10be6c78",
      "revId": "27fb4d31e2f8e6fdafa4a93c79b905955d9db4b5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2dd62aac_9fb1e8c2",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 2
      },
      "lineNbr": 2650,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2019-07-09T06:17:02Z",
      "side": 1,
      "message": "Eventually we would like to allow for resizing bdevs with open descriptors. Is there any way to do it with this new mechanism as it is now?",
      "revId": "27fb4d31e2f8e6fdafa4a93c79b905955d9db4b5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89c44201_ef67b03a",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 2
      },
      "lineNbr": 2650,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2019-07-11T12:36:10Z",
      "side": 1,
      "message": "Probably yes. Implementing this could be the next task here.",
      "parentUuid": "2dd62aac_9fb1e8c2",
      "revId": "27fb4d31e2f8e6fdafa4a93c79b905955d9db4b5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d64ea44_8d945bbd",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 2
      },
      "lineNbr": 2650,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2019-07-16T05:36:58Z",
      "side": 1,
      "message": "It should be thought out before the new API is introduced.\n\nYou can\u0027t just modify bdev-\u003eblockcnt on one thread while other threads constantly do I/O and reference the very same bdev-\u003eblockcnt. It\u0027s a non-atomic 64-bit value and even the assignment that we already have at line 2254 is super fishy. You need some way to synchronize bdev-\u003eblockcnt accesses, and one way to do it is to make the resize event asynchronous, so that the upper layer could do the following:\n\n-\u003e notify_cb is called\n   -\u003e start informing other I/O threads of the new blocksize\n-\u003e after all the threads are updated, consume the bdev resize event and change the blocksize (it should be probably a field in the descriptor struct)",
      "parentUuid": "89c44201_ef67b03a",
      "revId": "27fb4d31e2f8e6fdafa4a93c79b905955d9db4b5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14b55f03_446cd681",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 2
      },
      "lineNbr": 2650,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2019-07-16T10:13:15Z",
      "side": 1,
      "message": "In my patch I\u0027m not modifying blockcnt. This patch is only related to event notification - not to how the resize itself works. If you see issue with resize flow please fill in github issue for that.",
      "parentUuid": "9d64ea44_8d945bbd",
      "revId": "27fb4d31e2f8e6fdafa4a93c79b905955d9db4b5",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}