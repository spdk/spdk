{
  "comments": [
    {
      "key": {
        "uuid": "fe2fe5b7_0b6604d0",
        "filename": "doc/bdev.md",
        "patchSetId": 10
      },
      "lineNbr": 227,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "Raid -\u003e RAID everywhere (this is an acronym), and add a space between RAID and the level: \"RAID 1\".",
      "range": {
        "startLine": 227,
        "startChar": 3,
        "endLine": 227,
        "endChar": 8
      },
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "74537d66_3f8e1963",
        "filename": "doc/bdev.md",
        "patchSetId": 10
      },
      "lineNbr": 229,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "Can you clarify what is meant by \"same type\"?",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ea34398_58122dd0",
        "filename": "doc/bdev.md",
        "patchSetId": 10
      },
      "lineNbr": 230,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "utilize",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6933c87c_0078ba1d",
        "filename": "doc/bdev.md",
        "patchSetId": 10
      },
      "lineNbr": 230,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "I\u0027m not clear on what this sentence is trying to say - maybe something like:\n\n\"The RAID 1 bdev is meant as an example of how to implement a virtual block device and is not a fully-functional RAID implementation.\"\n\nAnd we should emphasize the missing features so that it isn\u0027t mistaken for a production-ready RAID stack - for example, it does not actually perform any fallback if a read fails on one of the disks, doesn\u0027t handle hotplug/drive failure at runtime, etc.",
      "parentUuid": "4ea34398_58122dd0",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10647c18_079e6ab5",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 48,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "why 8?  the code clearly only supports 2",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba4d6635_5c0eb44c",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 56,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "num_children would be a better name - but not sure if this is needed if it is only 2 children",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c1e58d67_43ce0abb",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 76,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "Seems like if we are hard-coding two devices here, then we should do that above instead of using arrays for bdev and desc; alternatively, first_child_name and second_child name should be an array instead.",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8a09fd07_26f1aa4e",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 82,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "Can these use the queue.h list/tailq/... macros instead?",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e675a9ac_a04a3cff",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 127,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "Remove the _disk from this (just use \"raid1\").",
      "range": {
        "startLine": 127,
        "startChar": 26,
        "endLine": 127,
        "endChar": 36
      },
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1cdaa5e_35cecb96",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 131,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "This \"bdev\" field is just duplicating the info that is already in the top-level get_bdevs call and can be removed.",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4ffe4dff_90d5be0b",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 132,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "RAID member disks aren\u0027t really \"children\" - can we call this \"num_bdevs\" or similar instead?",
      "range": {
        "startLine": 132,
        "startChar": 26,
        "endLine": 132,
        "endChar": 40
      },
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6cfd3585_cf05c353",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 133,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "This variable is a uint32, not an int32.",
      "range": {
        "startLine": 133,
        "startChar": 17,
        "endLine": 133,
        "endChar": 22
      },
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae33d939_7e2ac7ad",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 134,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "Is this children or base bdevs? I think the names are quite confusing.",
      "range": {
        "startLine": 134,
        "startChar": 15,
        "endLine": 134,
        "endChar": 24
      },
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5082fa0b_0d1a5ef1",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 135,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "This is going to produce invalid JSON if there\u0027s more than one child.  Maybe you want to put this in an array instead? e.g.\n\n   spdk_json_write_name(w, \"child_bdevs\");\n   spdk_json_write_array_begin(w);\n   TAILQ_FOREACH(...) {\n       spdk_json_write_string(w, bdev-\u003ename);\n   }\n   spdk_json_write_array_end(w);",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f41794b1_cf031c87",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 183,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "need to complete the I/O here if rc \u003c 0\n\nyou cannot rely on the completion at line 272 - this callback may get deferred if there are no buffers available when the I/O is submitted",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6cf3976d_63dd414d",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 205,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "you should just return here, and you\u0027ll need to put a separate child_io_num check in vbdev_raid1_get_buf_cb to handle the deferred callback case",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "87af2e19_b0e33479",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 289,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "This should really check all backing devices and return true only if all devices support the I/O type.",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b302dd04_52229341",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 295,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "extra newline",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b447cd10_63c610a4",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 302,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "fn_table should be const.",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec1255bc_dfc0237e",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 303,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "extra tab",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a5caffb_7011dc26",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 355,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "I would rename this to something like raid1_vbdev_free\n\nJust naming this spdk_vbdev (with no raid1 in the name) makes it seem like this is a generic spdk API function and not specific to the raid1 module",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0941119d_b5311241",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 374,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "I would rename this to something like raid1_base_construct",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8cf511b6_e5979e77",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 413,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "We should validate that both devices have the same block size.  If they are different, we should probably just fail (or we need to do the conversion on each I/O).",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c944b8ca_65b1e520",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 421,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-03T20:16:33Z",
      "side": 1,
      "message": "if you have:\n\nbdev 0: blockcnt \u003d 16, blocklen \u003d 512\nbdev 1: blockcnt \u003d 2, blocklen \u003d 4096\n\nthe loop above will set rdisk-\u003ebdev.blocklen \u003d 4096\nbut we still use bdev 0\u0027s blockcnt - instead it should use bdev 1\u0027s blockcnt\n\nwhat if the two devices are different sizes?  even two different 800GB SSDs from different vendors could have slightly different sizes - I think we need to pick the minimum here",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "97cb9535_aecb1c3c",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 424,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "Why is product_name a parameter to this function? It seems to be always the same, so you can just assign the string constant directly here.",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "83a0cfdf_81bd5b0c",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 475,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "This should probably check each bdev individually and print a more useful error message that includes the bdev name that couldn\u0027t be found.",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19f4f911_553a420b",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 500,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "This is just strdup().",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "37082d75_980adf62",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 551,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "Remove this blank line.",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e0718e2_be2f08cf",
        "filename": "lib/bdev/raid1/vbdev_raid1.c",
        "patchSetId": 10
      },
      "lineNbr": 578,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2017-11-03T20:46:23Z",
      "side": 1,
      "message": "We shouldn\u0027t print out NULL via %s - that\u0027s potentially undefined behavior.",
      "revId": "441c7631a08272bd2ae942eb4fcacb5c551bb520",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}