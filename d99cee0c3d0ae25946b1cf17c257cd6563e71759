{
  "comments": [
    {
      "key": {
        "uuid": "5d219672_1a37601a",
        "filename": "lib/bdev/gpt/vbdev_gpt.c",
        "patchSetId": 10
      },
      "lineNbr": 152,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-02-12T21:00:29Z",
      "side": 1,
      "message": "Hi Shuhei,\n\nI am having trouble following these changes, but I think it is because the original code is also not clear.\n\nThis SPDK_GPT_BUFFER_SIZE is 32KB.  On 512-byte blockdevices, we must read 34 blocks or 17KB (LBA 0 - MBR, LBA 1 - GPT header, LBA 2-33 GPT partition entries).  On 4KB blockdevices, it is fewer blocks, but still roughly 17KB (I\u0027m not sure if MBR and GPT header are padded - haven\u0027t dug into this further yet).\n\nSo I think even with metadata-enabled devices, the SPDK_GPT_BUFFER_SIZE is sufficient.  If we are concerned about this, we could just increase SPDK_GPT_BUFFER_SIZE and reduce the complexity here.\n\nWhat do you think?  I\u0027m also curious if you\u0027ve been able to run tests on metadata-enabled devices with this patch?\n\n-Jim",
      "revId": "d99cee0c3d0ae25946b1cf17c257cd6563e71759",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8a25125_2ab90cc0",
        "filename": "lib/bdev/gpt/vbdev_gpt.c",
        "patchSetId": 10
      },
      "lineNbr": 152,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-02-12T23:13:30Z",
      "side": 1,
      "message": "What I wanted to do is just strip metadata from read data when there is metadata in read data.\n\nIf we shift from the start, we can strip metadata without using two buffers. But I added another temporary buffer.\n\nYou are correct and we don\u0027t have to increase the size of another temporary buffer.\n\nBut as I comment, I have not verified the original GPT bdev and this patch, and so this patch is not reviewable yet.",
      "parentUuid": "5d219672_1a37601a",
      "revId": "d99cee0c3d0ae25946b1cf17c257cd6563e71759",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}