{
  "comments": [
    {
      "key": {
        "uuid": "9d18bf9a_f6549a60",
        "filename": "lib/iscsi/conn.c",
        "patchSetId": 14
      },
      "lineNbr": 1320,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-10-09T02:17:09Z",
      "side": 1,
      "message": "Is there a scenario that the state was set to ISCSI_CONN_STATE_EXITING, and there is a pending response PDU in the list ?\n\nI saw the logout PDU should be fine, because the logout timeout poller will be started after 5 seconds.",
      "revId": "6387566557a86bbba79722f7eebf6771f95a7a7c",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6bf8f6c_48d78257",
        "filename": "lib/iscsi/conn.c",
        "patchSetId": 14
      },
      "lineNbr": 1320,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-10-09T02:30:08Z",
      "side": 1,
      "message": "Yes, Any IO may complete after the connection moved to EXITING. Then the completed IO will call spdk_iscsi_conn_write_pdu() to send response to initiator, and spdk_iscsi_conn_write_pdu() will call iscsi_conn_flush_pdus().",
      "parentUuid": "9d18bf9a_f6549a60",
      "revId": "6387566557a86bbba79722f7eebf6771f95a7a7c",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47238254_424d3d65",
        "filename": "lib/iscsi/conn.c",
        "patchSetId": 14
      },
      "lineNbr": 1320,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2019-10-09T02:37:49Z",
      "side": 1,
      "message": "Right, but iscsi_conn_flush_pdus() will return at line 1321 if the state was ISCSI_CONN_STATE_EXITING, is this your intention ?",
      "parentUuid": "e6bf8f6c_48d78257",
      "revId": "6387566557a86bbba79722f7eebf6771f95a7a7c",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3bc7de5c_b1679de5",
        "filename": "lib/iscsi/conn.c",
        "patchSetId": 14
      },
      "lineNbr": 1320,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-10-09T02:42:18Z",
      "side": 1,
      "message": "Yes, by the previous patches, if the connection is in the EXITING state, flush PDU will never success.\nHence flush_pdus() returns immediately here.\n\nOne of the major goal of this patch series is to remove the tight loop to flush PDUs.",
      "parentUuid": "47238254_424d3d65",
      "revId": "6387566557a86bbba79722f7eebf6771f95a7a7c",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}