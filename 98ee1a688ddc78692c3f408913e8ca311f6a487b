{
  "comments": [
    {
      "key": {
        "uuid": "204361d0_913b55c2",
        "filename": "lib/bdev/ocf/vbdev_ocf.c",
        "patchSetId": 22
      },
      "lineNbr": 205,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-03-21T17:11:30Z",
      "side": 1,
      "message": "should we assert(vbdev-\u003estate.started)?\n\nI don\u0027t see where vbdev-\u003estate.started ever gets set to false.  Having this if check here indicates the started flag could change between when spdk_io_device_unregister is called, and when this unregister_cb is invoked.  If that can\u0027t really happen, we should just assert instead to make it clear to the reader.",
      "revId": "98ee1a688ddc78692c3f408913e8ca311f6a487b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9709302d_ab5ad35f",
        "filename": "lib/bdev/ocf/vbdev_ocf.c",
        "patchSetId": 22
      },
      "lineNbr": 205,
      "author": {
        "id": 1014935
      },
      "writtenOn": "2019-03-26T11:02:18Z",
      "side": 1,
      "message": "state.started is set to false by calloc at initialization (line #799).\nIt should be checked here because because of scenarios where only single base device is attached - cache is not started then, so if we do stop_vbdev(), the \u0027status\u0027 will be -EINVAL or -EFAULT instad of 0\n\nShould we change state fields to be explicitely set to false?",
      "parentUuid": "204361d0_913b55c2",
      "revId": "98ee1a688ddc78692c3f408913e8ca311f6a487b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f545d7a4_cd3b3a99",
        "filename": "lib/bdev/ocf/vbdev_ocf.c",
        "patchSetId": 22
      },
      "lineNbr": 205,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-03-29T21:57:02Z",
      "side": 1,
      "message": "But unregister_cb can only get called via the spdk_io_device_unregister call at line 232.  That call only happens if vbdev-\u003estate.started \u003d\u003d true.  So I don\u0027t see how it could change from true to false.",
      "parentUuid": "9709302d_ab5ad35f",
      "revId": "98ee1a688ddc78692c3f408913e8ca311f6a487b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}