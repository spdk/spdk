{
  "comments": [
    {
      "key": {
        "uuid": "701a0aeb_cd9a1730",
        "filename": "scripts/perf/nvme/run_fio_test.py",
        "patchSetId": 1
      },
      "lineNbr": 72,
      "author": {
        "id": 1011314
      },
      "writtenOn": "2017-09-25T16:40:51Z",
      "side": 1,
      "message": "I am using fio-2.20-30-ge512. For that version there is no lat_ns, so I think this has to do with the fio version.\nWe need to make this script work for fio 3.0 and older versions too.\n\nHere is my json output.\n{\n  \"fio version\" : \"fio-2.20-30-ge512\",\n  \"timestamp\" : 1497269160,\n  \"timestamp_ms\" : 1497269160233,\n  \"time\" : \"Mon Jun 12 05:06:00 2017\",\n  \"global options\" : {\n    \"ioengine\" : \"libaio\",\n    \"thread\" : \"1\",\n    \"group_reporting\" : \"1\",\n    \"direct\" : \"1\",\n    \"verify\" : \"0\",\n    \"norandommap\" : \"1\",\n    \"cpumask\" : \"1\",\n    \"percentile_list\" : \"50:90:95:99:99.9:99.99:99.999\"\n  },\n  \"jobs\" : [\n    {\n      \"jobname\" : \"perf_test\",\n      \"groupid\" : 0,\n      \"error\" : 0,\n      \"eta\" : 0,\n      \"elapsed\" : 611,\n      \"job options\" : {\n        \"description\" : \"\\\"Run NVMe driver performance test for a given workload\\\"\",\n        \"bs\" : \"4096\",\n        \"rw\" : \"randrw\",\n        \"rwmixread\" : \"100\",\n        \"iodepth\" : \"1\",\n        \"time_based\" : \"1\",\n        \"ramp_time\" : \"10s\",\n        \"runtime\" : \"600\",\n        \"numjobs\" : \"1\",\n        \"filename\" : \"/dev/nvme0n1\"\n      },\n      \"read\" : {\n        \"io_bytes\" : 25029504,\n        \"bw\" : 41715,\n        \"iops\" : 10428.942618,\n        \"runtime\" : 600001,\n        \"total_ios\" : 6257376,\n        \"short_ios\" : 0,\n        \"drop_ios\" : 0,\n        \"slat\" : {\n          \"min\" : 2,\n          \"max\" : 189,\n          \"mean\" : 3.701250,\n          \"stddev\" : 3.237839\n        },\n        \"clat\" : {\n          \"min\" : 0,\n          \"max\" : 3097,\n          \"mean\" : 91.157996,\n          \"stddev\" : 19.984924,\n          \"percentile\" : {\n            \"50.000000\" : 86,\n            \"90.000000\" : 102,\n            \"95.000000\" : 103,\n            \"99.000000\" : 104,\n            \"99.900000\" : 135,\n            \"99.990000\" : 490,\n            \"99.999000\" : 2672,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0\n          }\n        },\n        \"lat\" : {\n          \"min\" : 41,\n          \"max\" : 3100,\n          \"mean\" : 95.008246,\n          \"stddev\" : 20.158614\n        },\n        \"bw_min\" : 39728,\n        \"bw_max\" : 42040,\n        \"bw_agg\" : 0.097657,\n        \"bw_mean\" : 41716.258333,\n        \"bw_dev\" : 354.700423\n      },\n      \"write\" : {\n        \"io_bytes\" : 0,\n        \"bw\" : 0,\n        \"iops\" : 0.000000,\n        \"runtime\" : 0,\n        \"total_ios\" : 0,\n        \"short_ios\" : 0,\n        \"drop_ios\" : 0,\n        \"slat\" : {\n          \"min\" : 0,\n          \"max\" : 0,\n          \"mean\" : 0.000000,\n          \"stddev\" : 0.000000\n        },\n        \"clat\" : {\n          \"min\" : 0,\n          \"max\" : 0,\n          \"mean\" : 0.000000,\n          \"stddev\" : 0.000000,\n          \"percentile\" : {\n            \"50.000000\" : 0,\n            \"90.000000\" : 0,\n            \"95.000000\" : 0,\n            \"99.000000\" : 0,\n            \"99.900000\" : 0,\n            \"99.990000\" : 0,\n            \"99.999000\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0\n          }\n        },\n        \"lat\" : {\n          \"min\" : 0,\n          \"max\" : 0,\n          \"mean\" : 0.000000,\n          \"stddev\" : 0.000000\n        },\n        \"bw_min\" : 0,\n        \"bw_max\" : 0,\n        \"bw_agg\" : 0.000000,\n        \"bw_mean\" : 0.000000,\n        \"bw_dev\" : 0.000000\n      },\n      \"trim\" : {\n        \"io_bytes\" : 0,\n        \"bw\" : 0,\n        \"iops\" : 0.000000,\n        \"runtime\" : 0,\n        \"total_ios\" : 0,\n        \"short_ios\" : 0,\n        \"drop_ios\" : 0,\n        \"slat\" : {\n          \"min\" : 0,\n          \"max\" : 0,\n          \"mean\" : 0.000000,\n          \"stddev\" : 0.000000\n        },\n        \"clat\" : {\n          \"min\" : 0,\n          \"max\" : 0,\n          \"mean\" : 0.000000,\n          \"stddev\" : 0.000000,\n          \"percentile\" : {\n            \"50.000000\" : 0,\n            \"90.000000\" : 0,\n            \"95.000000\" : 0,\n            \"99.000000\" : 0,\n            \"99.900000\" : 0,\n            \"99.990000\" : 0,\n            \"99.999000\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0,\n            \"0.00\" : 0\n          }\n        },\n        \"lat\" : {\n          \"min\" : 0,\n          \"max\" : 0,\n          \"mean\" : 0.000000,\n          \"stddev\" : 0.000000\n        },\n        \"bw_min\" : 0,\n        \"bw_max\" : 0,\n        \"bw_agg\" : 0.000000,\n        \"bw_mean\" : 0.000000,\n        \"bw_dev\" : 0.000000\n      },\n      \"usr_cpu\" : 2.102667,\n      \"sys_cpu\" : 7.315333,\n      \"ctx\" : 6257535,\n      \"majf\" : 0,\n      \"minf\" : 99,\n      \"iodepth_level\" : {\n        \"1\" : 101.673625,\n        \"2\" : 0.000000,\n        \"4\" : 0.000000,\n        \"8\" : 0.000000,\n        \"16\" : 0.000000,\n        \"32\" : 0.000000,\n        \"\u003e\u003d64\" : 0.000000\n      },\n      \"latency_us\" : {\n        \"2\" : 0.010000,\n        \"4\" : 0.010000,\n        \"10\" : 0.010000,\n        \"20\" : 0.010000,\n        \"50\" : 0.576871,\n        \"100\" : 63.252967,\n        \"250\" : 36.145710,\n        \"500\" : 0.012913,\n        \"750\" : 0.010000,\n        \"1000\" : 0.010000\n      },\n      \"latency_ms\" : {\n        \"2\" : 0.010000,\n        \"4\" : 0.010000,\n        \"10\" : 0.000000,\n        \"20\" : 0.000000,\n        \"50\" : 0.000000,\n        \"100\" : 0.000000,\n        \"250\" : 0.000000,\n        \"500\" : 0.000000,\n        \"750\" : 0.000000,\n        \"1000\" : 0.000000,\n        \"2000\" : 0.000000,\n        \"\u003e\u003d2000\" : 0.000000\n      },\n      \"latency_depth\" : 1,\n      \"latency_target\" : 0,\n      \"latency_percentile\" : 100.000000,\n      \"latency_window\" : 0,\n      \"desc\" : \"\\\"Run NVMe driver performance test for a given workload\\\"\"\n    }\n  ],\n  \"disk_util\" : [\n    {\n      \"name\" : \"nvme0n1\",\n      \"read_ios\" : 6361940,\n      \"write_ios\" : 0,\n      \"read_merges\" : 0,\n      \"write_merges\" : 0,\n      \"read_ticks\" : 563936,\n      \"write_ticks\" : 0,\n      \"in_queue\" : 563116,\n      \"util\" : 92.337410\n    }\n  ]\n}",
      "range": {
        "startLine": 72,
        "startChar": 60,
        "endLine": 72,
        "endChar": 66
      },
      "revId": "d04561cd4b12fae1cde44bfb25cfbf5c5b9f0148",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}