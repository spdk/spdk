{
  "comments": [
    {
      "key": {
        "uuid": "984f7e71_5dad4b4a",
        "filename": "lib/iscsi/conn.c",
        "patchSetId": 1
      },
      "lineNbr": 114,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2019-04-01T21:16:24Z",
      "side": 1,
      "message": "What code path ends up here, prior to spdk_initialize_iscsi_conns failing?",
      "revId": "ac95644882b0ce36db5f0cdb3184990f89bd8c1f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bcbfd1b8_95b6f07f",
        "filename": "lib/iscsi/conn.c",
        "patchSetId": 1
      },
      "lineNbr": 114,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-04-02T01:10:55Z",
      "side": 1,
      "message": "I could reproduced this issue.\n\nYes, spdk_initialize_iscsi_conns was not called when this issue occurs.\n\nStarting SPDK v19.04-pre / DPDK 19.02.0 initialization...\n[ DPDK EAL parameters: spdk_tgt --no-shconf -c 0x1 --log-level\u003dlib.eal:6 --base-virtaddr\u003d0x200000000000 --match-allocations --file-prefix\u003dspdk_pid10071 ]\nEAL: No free hugepages reported in hugepages-1048576kB\nEAL: VFIO support initialized\napp.c: 635:spdk_app_start: *NOTICE*: Total cores available: 1\nreactor.c: 233:_spdk_reactor_run: *NOTICE*: Reactor started on core 0\niscsi_subsystem.c: 169:spdk_iscsi_initialize_pdu_pool: *ERROR*: create PDU immediate data pool failed\niscsi_subsystem.c:1305:spdk_iscsi_parse_globals: *ERROR*: spdk_initialize_all_pools() failed\niscsi_subsystem.c:1330:spdk_iscsi_init: *ERROR*: spdk_iscsi_parse_globals() failed\nsubsystem.c: 129:spdk_subsystem_init_next: *ERROR*: Init subsystem iscsi failed\napp.c: 714:spdk_app_stop: *WARNING*: spdk_app_stop\u0027d on non-zero\nSegmentation fault (core dumped)\n\n\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\nCore was generated by `./app/spdk_tgt/spdk_tgt\u0027.\nProgram terminated with signal 11, Segmentation fault.\n#0  spdk_find_iscsi_connection_by_id (cid\u003d\u003coptimized out\u003e) at conn.c:115\n115             if (g_conns_array[cid].is_valid \u003d\u003d 1) {\nMissing separate debuginfos, use: debuginfo-install glibc-2.17-260.el7_6.3.x86_64 libaio-0.3.109-13.el7.x86_64 libgcc-4.8.5-28.el7_5.1.x86_64 libuuid-2.23.2-59.el7.x86_64 numactl-libs-2.0.9-7.el7.x86_64 openssl-libs-1.0.2k-16.el7.x86_64 zlib-1.2.7-17.el7.x86_64\n(gdb) bt\n#0  spdk_find_iscsi_connection_by_id (cid\u003d\u003coptimized out\u003e) at conn.c:115\n#1  spdk_shutdown_iscsi_conns () at conn.c:777\n#2  0x00000000004583b2 in _spdk_event_queue_run_batch (reactor\u003d0x1d4bc80,\n    thread\u003d0x1d4bf30) at reactor.c:162\n#3  _spdk_reactor_run (arg\u003d0x1d4bc80) at reactor.c:245\n#4  0x0000000000458735 in spdk_reactors_start () at reactor.c:331\n#5  0x00000000004577c9 in spdk_app_start (opts\u003dopts@entry\u003d0x7ffe81c8aac0,\n    start_fn\u003dstart_fn@entry\u003d0x408230 \u003cspdk_tgt_started\u003e, arg1\u003darg1@entry\u003d0x0)\n    at app.c:680\n#6  0x0000000000406733 in main (argc\u003d1, argv\u003d0x7ffe81c8ac58) at spdk_tgt.c:125",
      "parentUuid": "984f7e71_5dad4b4a",
      "revId": "ac95644882b0ce36db5f0cdb3184990f89bd8c1f",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}