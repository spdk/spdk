{
  "comments": [
    {
      "key": {
        "uuid": "05c9fd9c_038b94bd",
        "filename": "include/spdk/dif.h",
        "patchSetId": 8
      },
      "lineNbr": 60,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-11-19T21:53:17Z",
      "side": 1,
      "message": "I\u0027m unclear on the definition of start_blocks. Is this from the start of the iov, or from the start of the storage device?",
      "revId": "fe1790d5872cca763490114d2d69e81fdeafcb0e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5e4ecd6e_82f1fc65",
        "filename": "include/spdk/dif.h",
        "patchSetId": 8
      },
      "lineNbr": 60,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-11-20T09:04:47Z",
      "side": 1,
      "message": "Yes, I saw that start_blocks and num_blocks were not meaningful too.\n\nStart reference tag is necessary and I changed start_blocks to ref_tag in the next patch.",
      "parentUuid": "05c9fd9c_038b94bd",
      "revId": "fe1790d5872cca763490114d2d69e81fdeafcb0e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3d4bbac9_8a304543",
        "filename": "include/spdk/dif.h",
        "patchSetId": 8
      },
      "lineNbr": 69,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-11-19T21:53:17Z",
      "side": 1,
      "message": "Can you move the parameters for the block size before the start_blocks and num_blocks parameters? I think that is more intuitive.",
      "revId": "fe1790d5872cca763490114d2d69e81fdeafcb0e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b1acfa0_3bae0e05",
        "filename": "include/spdk/dif.h",
        "patchSetId": 8
      },
      "lineNbr": 69,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-11-20T09:04:47Z",
      "side": 1,
      "message": "I removed start_blocks and num_blocks and added ref_tag instead. I hope the intention is clear for you.",
      "parentUuid": "3d4bbac9_8a304543",
      "revId": "fe1790d5872cca763490114d2d69e81fdeafcb0e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b98fa84c_fbfb2aa4",
        "filename": "lib/util/dif.c",
        "patchSetId": 8
      },
      "lineNbr": 118,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2018-11-19T04:53:44Z",
      "side": 1,
      "message": "Hi Shuhei, I think maybe we don\u0027t need so complicated logic here, for IO vectors, each vector\u0027s data length should be the multiple of (block size + metadata size), I really can\u0027t think out what kind of application can have such usage scenario.",
      "revId": "fe1790d5872cca763490114d2d69e81fdeafcb0e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9c91fe98_92e92ce9",
        "filename": "lib/util/dif.c",
        "patchSetId": 8
      },
      "lineNbr": 118,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-11-19T05:21:30Z",
      "side": 1,
      "message": "Hi Changpeng,\n\nThank you for your comment.\n\nI developed and tested these complex code to get better understanding of T10DIF + IOV, and to remove any limitation of alignment and granularity.\n\nI agree with you that supporting multiple of (block size + metadata size) will be enough because I asked that idea in SPDK mailing list before. I remove these complex code in the next patch.\n\nWe will be able to support these complex use cases even if becoming necessary.\n\nI have had other critical tasks until tomorrow but I hope I will submit the next version in this week.\n\nThanks,\nShuhei",
      "parentUuid": "b98fa84c_fbfb2aa4",
      "revId": "fe1790d5872cca763490114d2d69e81fdeafcb0e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6d4d91e1_d52b404b",
        "filename": "lib/util/dif.c",
        "patchSetId": 8
      },
      "lineNbr": 118,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2018-11-19T05:27:25Z",
      "side": 1,
      "message": "thanks Shuhei, no hurry, :).",
      "parentUuid": "9c91fe98_92e92ce9",
      "revId": "fe1790d5872cca763490114d2d69e81fdeafcb0e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2018080_22f8ce47",
        "filename": "lib/util/dif.c",
        "patchSetId": 8
      },
      "lineNbr": 118,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-11-19T21:53:17Z",
      "side": 1,
      "message": "I am concerned that due to splitting for other reasons (RDMA MR spanning, striping, PRP lists), we may actually end up with iovec elements that are not a multiple of the block size. Especially when the block size is not a power of two. I think you should leave it in actually.",
      "parentUuid": "6d4d91e1_d52b404b",
      "revId": "fe1790d5872cca763490114d2d69e81fdeafcb0e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8300a494_d240098f",
        "filename": "lib/util/dif.c",
        "patchSetId": 8
      },
      "lineNbr": 118,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-11-20T09:04:47Z",
      "side": 1,
      "message": "OK, I keep this function.",
      "parentUuid": "d2018080_22f8ce47",
      "revId": "fe1790d5872cca763490114d2d69e81fdeafcb0e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5dedbadf_e0fe6361",
        "filename": "test/unit/lib/util/dif.c/dif_ut.c",
        "patchSetId": 8
      },
      "lineNbr": 664,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-11-19T21:53:17Z",
      "side": 1,
      "message": "Great test! I was about to suggest you add tests for iov splits in the middle of the guard, apptag, and reftag values, but of course you already have them.",
      "revId": "fe1790d5872cca763490114d2d69e81fdeafcb0e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}