{
  "comments": [
    {
      "key": {
        "uuid": "0aa8b0ec_c53795bd",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 3
      },
      "lineNbr": 2677,
      "author": {
        "id": 1016870
      },
      "writtenOn": "2019-08-23T07:13:00Z",
      "side": 1,
      "message": "is the logic reverted?\nshould it be if ( ! __atomic_test_and_set...) ?",
      "revId": "ef55ffdbf59c9336069e660c3766a85df3fe0249",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3b4edf7e_46bf3e81",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 3
      },
      "lineNbr": 2677,
      "author": {
        "id": 1016870
      },
      "writtenOn": "2019-08-27T05:29:47Z",
      "side": 1,
      "message": "It should be if (!__atomic_test_and_set(...)), otherwise the following statement may run multiple times.\n\nBelow is a simple test:\n\n    bool flag \u003d false;\n\n    // return false\n    if (__atomic_test_and_set(\u0026flag, __ATOMIC_RELAXED))\n        printf(\"flag \u003d false -\u003e true\\n\");\n\n    // return true\n    if (__atomic_test_and_set(\u0026flag, __ATOMIC_RELAXED))\n        printf(\"flag \u003d true -\u003e true\\n\");\n\n    // return true\n    if (__atomic_test_and_set(\u0026flag, __ATOMIC_RELAXED))\n        printf(\"flag \u003d true -\u003e true\\n\");\n\nThis code outputs \"flag \u003d true -\u003e true\" twice.",
      "parentUuid": "0aa8b0ec_c53795bd",
      "revId": "ef55ffdbf59c9336069e660c3766a85df3fe0249",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}