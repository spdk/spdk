{
  "comments": [
    {
      "key": {
        "uuid": "a5d400b6_9de39676",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 1
      },
      "lineNbr": 380,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-03-14T12:40:34Z",
      "side": 1,
      "message": "I think it\u0027d be better to add a variable to keep track of the fact that we\u0027re doing the second part (rebuilding the l2p) and change the condition in ftl_restore_complete.",
      "range": {
        "startLine": 379,
        "startChar": 0,
        "endLine": 380,
        "endChar": 28
      },
      "revId": "223491f1c682ab7468ce70b9fe36078b972eb746",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "22628692_e5817192",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 1
      },
      "lineNbr": 380,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-03-14T13:10:47Z",
      "side": 1,
      "message": "I don\u0027t fully understand your idea. We can fail same way during l2p rebuilding, we can only add flag to indicate that we have finished l2p rebuild and in such case check this flag in ftl_restore_complete to free reloc - but in my opinion it is worthless to have state that will live for one function call?",
      "parentUuid": "a5d400b6_9de39676",
      "range": {
        "startLine": 379,
        "startChar": 0,
        "endLine": 380,
        "endChar": 28
      },
      "revId": "223491f1c682ab7468ce70b9fe36078b972eb746",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b1b98e34_3772129a",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 1
      },
      "lineNbr": 380,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-03-14T15:22:27Z",
      "side": 1,
      "message": "The restoration is clearly separated into two distinct phases: 1) reading head mds and serializing the bands and 2) restoring the L2P. I think having an indicator inside the restore struct just makes sense. And I don\u0027t think it\u0027s a big deal for this just to cover this particular case right now.",
      "parentUuid": "22628692_e5817192",
      "range": {
        "startLine": 379,
        "startChar": 0,
        "endLine": 380,
        "endChar": 28
      },
      "revId": "223491f1c682ab7468ce70b9fe36078b972eb746",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "101fb321_e7e7b797",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 1
      },
      "lineNbr": 380,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-03-14T15:45:34Z",
      "side": 1,
      "message": "I still don\u0027t understand how we can use this information - what does it change that we will know that we are in restoring L2P phase in this case - we want information that restore have finished his work to cleanup it correctly.",
      "parentUuid": "b1b98e34_3772129a",
      "range": {
        "startLine": 379,
        "startChar": 0,
        "endLine": 380,
        "endChar": 28
      },
      "revId": "223491f1c682ab7468ce70b9fe36078b972eb746",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3bd59643_faf8166f",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 1
      },
      "lineNbr": 380,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-03-14T16:27:20Z",
      "side": 1,
      "message": "It\u0027s a good practice to have the allocations/frees in one place. Having that additional state info will allow us to achieve that.",
      "parentUuid": "101fb321_e7e7b797",
      "range": {
        "startLine": 379,
        "startChar": 0,
        "endLine": 380,
        "endChar": 28
      },
      "revId": "223491f1c682ab7468ce70b9fe36078b972eb746",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}