{
  "comments": [
    {
      "key": {
        "uuid": "7d86b0ba_244429ec",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 8
      },
      "lineNbr": 544,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-07-03T13:55:59Z",
      "side": 1,
      "message": "Reading two bands with QD\u003d1 and bs\u003d1 will be very slow, but I\u0027m ok to improve it later (increase block size - you could add TODO for this)",
      "revId": "da73885ca79bfe4b2dacb01845871d89f6788cf8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "073ee6b6_025713e6",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 8
      },
      "lineNbr": 617,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-07-03T13:55:59Z",
      "side": 1,
      "message": "I think this if should be commented - this is case when we detect overlaping region.",
      "revId": "da73885ca79bfe4b2dacb01845871d89f6788cf8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8ab9d79_5e271e64",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 8
      },
      "lineNbr": 621,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-07-03T08:45:26Z",
      "side": 1,
      "message": "I don\u0027t like idea that we are doing all this restoration inside callbacks - it is hard to follow what is happening here. Maybe we add some restore task and do this restoration in similar way as reloc is processing IOs?",
      "revId": "da73885ca79bfe4b2dacb01845871d89f6788cf8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69263964_862e3b10",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 8
      },
      "lineNbr": 621,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-07-03T08:55:21Z",
      "side": 1,
      "message": "Restore task? First of all, it\u0027s not done periodically, only at the beginning. Secondly it\u0027d only add more code and complicate stuff (additional state variables just to know what\u0027s being currently done). Moreover, I think doing stuff in callbacks very much makes sense - it divides the phases of the recovery process very neatly.",
      "parentUuid": "f8ab9d79_5e271e64",
      "revId": "da73885ca79bfe4b2dacb01845871d89f6788cf8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "51f69359_4eae4bef",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 8
      },
      "lineNbr": 621,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-07-03T09:08:51Z",
      "side": 1,
      "message": "I was thinking of restore phase inside ftl_core_task. This restore logic is complex and dividing it into states will be more readable and easier to debugging in my opinion.",
      "parentUuid": "69263964_862e3b10",
      "revId": "da73885ca79bfe4b2dacb01845871d89f6788cf8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a001f83_076c7efb",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 8
      },
      "lineNbr": 621,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-07-03T09:10:37Z",
      "side": 1,
      "message": "I disagree, it\u0027ll only make things more complicated. Moreover adding stuff to the core task that doesn\u0027t need to be there (we only need to do that at the beginning) isn\u0027t a good idea.",
      "parentUuid": "51f69359_4eae4bef",
      "revId": "da73885ca79bfe4b2dacb01845871d89f6788cf8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1980b8dd_4290d95e",
        "filename": "lib/ftl/ftl_restore.c",
        "patchSetId": 8
      },
      "lineNbr": 621,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-07-03T13:55:59Z",
      "side": 1,
      "message": "I think the complexity will be similar but such code could be more readable, but lets leave it for now - logic looks fine in my opinion. Maybe you could add some comment at beginning of nv cache restore that will describe all steps we are doing here or we can add new section do FTL documentation.",
      "parentUuid": "8a001f83_076c7efb",
      "revId": "da73885ca79bfe4b2dacb01845871d89f6788cf8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}