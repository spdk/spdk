{
  "comments": [
    {
      "key": {
        "uuid": "45a48631_596326ea",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 3
      },
      "lineNbr": 594,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2018-12-17T10:10:44Z",
      "side": 1,
      "message": "I can understand adding a check in discovery, do you need a check here ?",
      "revId": "03f2b5313d18a4b1ccd75eb9544588be26eb3c45",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ee7f10b_78c82b13",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 3
      },
      "lineNbr": 594,
      "author": {
        "id": 1011275
      },
      "writtenOn": "2018-12-18T06:51:11Z",
      "side": 1,
      "message": "Yes, we still need here. You can this function is used to return the subsystem with during constructing the admin qpair.\n\nThis is used in constructing the admin qpair, we need to make sure that requested subsystem of the qpair is in active state. If the subsystem is not active (may be inactiving or pause), we should not let the qpair connects, then we can prevent the further issue.",
      "parentUuid": "45a48631_596326ea",
      "revId": "03f2b5313d18a4b1ccd75eb9544588be26eb3c45",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7014c5dc_c44fc433",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 3
      },
      "lineNbr": 594,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-12-18T21:06:15Z",
      "side": 1,
      "message": "I am with Changpeng on this one. We call spdk_nvmf_tgt_find _subsystem all over the place. Like when we try to delete a subsystem, when we add and remove namespaces, when we add and remove hosts. I think we should be able to do all of those things without a paused subsystem. This would require a subsystem to be active to do any of those.",
      "parentUuid": "8ee7f10b_78c82b13",
      "revId": "03f2b5313d18a4b1ccd75eb9544588be26eb3c45",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "20759385_4f42f95f",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 3
      },
      "lineNbr": 594,
      "author": {
        "id": 1011275
      },
      "writtenOn": "2018-12-18T23:09:14Z",
      "side": 1,
      "message": "Hi Seth,\nExcept active, there is other states like pausing, can you make sure that in all the state, it can work well? At least, this code actually can present this. It means that if the subsystem is not active, we will not create the related connection.",
      "parentUuid": "7014c5dc_c44fc433",
      "revId": "03f2b5313d18a4b1ccd75eb9544588be26eb3c45",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bda282b0_43356b1a",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 3
      },
      "lineNbr": 594,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-12-19T00:15:50Z",
      "side": 1,
      "message": "AH, you are right. I looked back through all of the calls in nvmf_rpc.py and they all depend on the subsystem being active anyways, including spdk_rpc_delete_nvmf_subsystem which I was most worried about.\nI am good with making this.",
      "parentUuid": "20759385_4f42f95f",
      "revId": "03f2b5313d18a4b1ccd75eb9544588be26eb3c45",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8fae2b22_f850f3af",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 3
      },
      "lineNbr": 594,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-12-19T21:29:29Z",
      "side": 1,
      "message": "Just because today there aren\u0027t any operations occurring that don\u0027t already check for an active subsystem doesn\u0027t mean that there won\u0027t be. This function is the only way for a user to find a subsystem, so it should return a subsystem regardless of its state.\n\nInstead, in the code for constructing the admin qpair, look up the subsystem and then check there that it is in the appropriate state.",
      "parentUuid": "bda282b0_43356b1a",
      "revId": "03f2b5313d18a4b1ccd75eb9544588be26eb3c45",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14d370c3_2209a068",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 3
      },
      "lineNbr": 594,
      "author": {
        "id": 1011275
      },
      "writtenOn": "2018-12-20T01:29:17Z",
      "side": 1,
      "message": "Hi Ben,\n\nSo what\u0027s the difference, this function is only used for constructing the admin qpair, what\u0027s the different to check after or before?",
      "parentUuid": "8fae2b22_f850f3af",
      "revId": "03f2b5313d18a4b1ccd75eb9544588be26eb3c45",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}