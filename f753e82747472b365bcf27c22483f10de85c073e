{
  "comments": [
    {
      "key": {
        "uuid": "ceed588b_982e52bd",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 3
      },
      "lineNbr": 922,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-02-26T17:25:02Z",
      "side": 1,
      "message": "Too many spaces.",
      "range": {
        "startLine": 922,
        "startChar": 19,
        "endLine": 922,
        "endChar": 21
      },
      "revId": "f753e82747472b365bcf27c22483f10de85c073e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a6e39858_d588bdc3",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 3
      },
      "lineNbr": 922,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-02-26T17:34:54Z",
      "side": 1,
      "message": "two spaces after a period is OK in English at least (not sure about other languages)",
      "parentUuid": "ceed588b_982e52bd",
      "range": {
        "startLine": 922,
        "startChar": 19,
        "endLine": 922,
        "endChar": 21
      },
      "revId": "f753e82747472b365bcf27c22483f10de85c073e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0a8c687e_b5bbec4e",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 3
      },
      "lineNbr": 928,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-02-26T17:25:02Z",
      "side": 1,
      "message": "We should remove all queued persists for this blob before returning. Otherwise we will end up with memory leaks.",
      "range": {
        "startLine": 928,
        "startChar": 2,
        "endLine": 928,
        "endChar": 9
      },
      "revId": "f753e82747472b365bcf27c22483f10de85c073e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c10e1f7d_bf03ec7a",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 3
      },
      "lineNbr": 928,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-02-26T17:34:54Z",
      "side": 1,
      "message": "sure - this should never happen but it would be good to check - not only should we free them but we should also assert",
      "parentUuid": "0a8c687e_b5bbec4e",
      "range": {
        "startLine": 928,
        "startChar": 2,
        "endLine": 928,
        "endChar": 9
      },
      "revId": "f753e82747472b365bcf27c22483f10de85c073e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c685785_d344300d",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 3
      },
      "lineNbr": 945,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-02-26T17:25:02Z",
      "side": 1,
      "message": "If we successfully persisted metadata we will never get to execute queued operation, because in line 907 we change blob-\u003estate to SPDK_BLOB_STATE_CLEAN. Is this on purpose? I\u0027m not sure if I understand this correctly.",
      "range": {
        "startLine": 938,
        "startChar": 0,
        "endLine": 945,
        "endChar": 3
      },
      "revId": "f753e82747472b365bcf27c22483f10de85c073e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "226fd0bc_75e64c45",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 3
      },
      "lineNbr": 945,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-02-26T17:29:42Z",
      "side": 1,
      "message": "Please disregard this comment. I wash looking on unchanged code of mark_clean function.",
      "parentUuid": "2c685785_d344300d",
      "range": {
        "startLine": 938,
        "startChar": 0,
        "endLine": 945,
        "endChar": 3
      },
      "revId": "f753e82747472b365bcf27c22483f10de85c073e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "109a1a96_4efa98ed",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 3
      },
      "lineNbr": 945,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-02-26T17:45:57Z",
      "side": 1,
      "message": "Once again... In which case can we end up having state SPDK_BLOB_STATE_CLEAN and still having an operation queued in queued_blob_persists queue that is targeted for the blob that operate on right now? In other words... Is it possible to end up with if statement from line 938 processed as true?",
      "parentUuid": "226fd0bc_75e64c45",
      "range": {
        "startLine": 938,
        "startChar": 0,
        "endLine": 945,
        "endChar": 3
      },
      "revId": "f753e82747472b365bcf27c22483f10de85c073e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6331eb3c_0242850a",
        "filename": "lib/blob/blobstore.c",
        "patchSetId": 3
      },
      "lineNbr": 945,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-02-26T18:06:47Z",
      "side": 1,
      "message": "Yes.  This can happen if spdk_blob_sync_md() is called a second (or third or fourth) time before the first one has completed and without any metadata changes between the first and second call.",
      "parentUuid": "109a1a96_4efa98ed",
      "range": {
        "startLine": 938,
        "startChar": 0,
        "endLine": 945,
        "endChar": 3
      },
      "revId": "f753e82747472b365bcf27c22483f10de85c073e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}