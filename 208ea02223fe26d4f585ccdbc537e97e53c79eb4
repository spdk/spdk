{
  "comments": [
    {
      "key": {
        "uuid": "c92cff72_1145bc4c",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 43,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-10-18T12:44:58Z",
      "side": 1,
      "message": "This is transparent proxy. Just read everything without decoding it.",
      "range": {
        "startLine": 38,
        "startChar": 7,
        "endLine": 43,
        "endChar": 13
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "282538bc_cfd4b546",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 43,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-10-18T13:23:47Z",
      "side": 1,
      "message": "This decoding is used to know when to stop reading. Without it we won\u0027t know when buffer is complete.",
      "parentUuid": "c92cff72_1145bc4c",
      "range": {
        "startLine": 38,
        "startChar": 7,
        "endLine": 43,
        "endChar": 13
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "12e9d3e6_3977f1b0",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 43,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-10-18T13:45:52Z",
      "side": 1,
      "message": "But if there is no ID in request there will be no response from SPDK so you will hang here. Maybe some timeout or \n  \n  sock.sendall(req)\n\n  if not json.loads(req).has_key(\u0027id\u0027):\n    return None.",
      "parentUuid": "282538bc_cfd4b546",
      "range": {
        "startLine": 38,
        "startChar": 7,
        "endLine": 43,
        "endChar": 13
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f14b924e_1389e563",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 43,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-10-18T14:09:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "12e9d3e6_3977f1b0",
      "range": {
        "startLine": 38,
        "startChar": 7,
        "endLine": 43,
        "endChar": 13
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28b59ab8_c32d4494",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 54,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-10-18T12:44:58Z",
      "side": 1,
      "message": "Any response is good response, even the error response. You can remove it.",
      "range": {
        "startLine": 45,
        "startChar": 0,
        "endLine": 54,
        "endChar": 23
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b119ab24_ab4a03ab",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 54,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-10-18T13:23:47Z",
      "side": 1,
      "message": "Agree, except first one where I don\u0027t get response at all.",
      "parentUuid": "28b59ab8_c32d4494",
      "range": {
        "startLine": 45,
        "startChar": 0,
        "endLine": 54,
        "endChar": 23
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5eee202d_fcc7e712",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 57,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-10-18T12:44:58Z",
      "side": 1,
      "message": "Don\u0027t care what the response is\n\nreturn buf",
      "range": {
        "startLine": 57,
        "startChar": 11,
        "endLine": 57,
        "endChar": 19
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "057c5fa0_de5c3328",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 57,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-10-18T13:23:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5eee202d_fcc7e712",
      "range": {
        "startLine": 57,
        "startChar": 11,
        "endLine": 57,
        "endChar": 19
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79d8659c_ad3e86c6",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 82,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-10-18T12:44:58Z",
      "side": 1,
      "message": "It is not C, you don\u0027t have to check for NULL. Just do the comapre here.",
      "range": {
        "startLine": 81,
        "startChar": 11,
        "endLine": 82,
        "endChar": 66
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f6b262fe_00370a8a",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 82,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-10-18T13:23:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "79d8659c_ad3e86c6",
      "range": {
        "startLine": 81,
        "startChar": 11,
        "endLine": 82,
        "endChar": 66
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3cbd88d4_c83efd29",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 87,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-10-18T12:44:58Z",
      "side": 1,
      "message": "No response is possible if request don\u0027t have ID. So this check is also not needed.",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 87,
        "endChar": 32
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5911f063_1bfba47b",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 87,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-10-18T13:23:47Z",
      "side": 1,
      "message": "This is the case with correct ID.",
      "parentUuid": "3cbd88d4_c83efd29",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 87,
        "endChar": 32
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f3e4015f_bad42b1d",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 87,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-10-18T13:45:52Z",
      "side": 1,
      "message": "There might be no ID in request meaning user don\u0027t want any response (fire and forget). So if you want to handle this you need to check in rpc_call()\n\n  if len(buf) \u003e 0 \u0026\u0026 response is None:\n     raise ....\n\nand here catch that exception and then send resp 500.",
      "parentUuid": "5911f063_1bfba47b",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 87,
        "endChar": 32
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "954e6e33_3d14d4e1",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 87,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-10-18T14:09:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f3e4015f_bad42b1d",
      "range": {
        "startLine": 87,
        "startChar": 12,
        "endLine": 87,
        "endChar": 32
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e40e501_6f25c70d",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 91,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-10-18T12:44:58Z",
      "side": 1,
      "message": "just send result of rpc_call() whatever it is.",
      "range": {
        "startLine": 91,
        "startChar": 33,
        "endLine": 91,
        "endChar": 85
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca864475_bf2ebda6",
        "filename": "scripts/rpc_http_proxy.py",
        "patchSetId": 7
      },
      "lineNbr": 91,
      "author": {
        "id": 1011262
      },
      "writtenOn": "2018-10-18T13:23:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8e40e501_6f25c70d",
      "range": {
        "startLine": 91,
        "startChar": 33,
        "endLine": 91,
        "endChar": 85
      },
      "revId": "208ea02223fe26d4f585ccdbc537e97e53c79eb4",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}