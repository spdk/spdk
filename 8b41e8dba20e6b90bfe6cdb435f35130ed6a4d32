{
  "comments": [
    {
      "key": {
        "uuid": "c3b4a854_21d738ab",
        "filename": "include/spdk/string.h",
        "patchSetId": 9
      },
      "lineNbr": 80,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-12-18T11:03:58Z",
      "side": 1,
      "message": "This sentence doesn\u0027t make sense. I think you should something like \"The input buffer is passed to free() in any case and must not be used anymore.\" or something like that. The sentence from commit message also looks good to be pasted here.",
      "range": {
        "startLine": 78,
        "startChar": 73,
        "endLine": 80,
        "endChar": 77
      },
      "revId": "8b41e8dba20e6b90bfe6cdb435f35130ed6a4d32",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d6c54cd_465cc0f1",
        "filename": "include/spdk/string.h",
        "patchSetId": 9
      },
      "lineNbr": 80,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-12-19T07:48:07Z",
      "side": 1,
      "message": "Hi Pawel,\n\nWhat I wanted to say is\n\"The returned string should be passed to free() when no longer needed, except that spdk_sprintf_realloc() will free buffer when it fails.\"\n\nDoes this make sense to you?",
      "parentUuid": "c3b4a854_21d738ab",
      "range": {
        "startLine": 78,
        "startChar": 73,
        "endLine": 80,
        "endChar": 77
      },
      "revId": "8b41e8dba20e6b90bfe6cdb435f35130ed6a4d32",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "370b0d74_90b2a5af",
        "filename": "include/spdk/string.h",
        "patchSetId": 9
      },
      "lineNbr": 80,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-12-19T08:12:42Z",
      "side": 1,
      "message": "This function differ vs libc realloc() in a way that the input buffer is always freed also in case of success (realloc will free it). So for me this look as not true. But let others vote here.",
      "parentUuid": "4d6c54cd_465cc0f1",
      "range": {
        "startLine": 78,
        "startChar": 73,
        "endLine": 80,
        "endChar": 77
      },
      "revId": "8b41e8dba20e6b90bfe6cdb435f35130ed6a4d32",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c7c33765_95fd41a2",
        "filename": "include/spdk/string.h",
        "patchSetId": 9
      },
      "lineNbr": 80,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-12-19T08:25:14Z",
      "side": 1,
      "message": "What we should say is that there is the following difference. Is it OK to say nothing about this?\n\nI updated the comment, just removed the marked part.\n\nlibc_realloc() requires the caller to have the following sequence.\n  tmp \u003d realloc(buffer, new_size);\n  if (tmp \u003d\u003d NULL) {\n    free bufer;\n    return;\n  } else\n    buffer \u003d tmp;\n\nBut spdk_sprintf_realloc() requires the caller to have the following sequence.\n  buffer \u003d spdk_sprintf_realloc(buffer, new_size);\n  if (buffer \u003d\u003d NULL)\n    return;",
      "parentUuid": "370b0d74_90b2a5af",
      "range": {
        "startLine": 78,
        "startChar": 73,
        "endLine": 80,
        "endChar": 77
      },
      "revId": "8b41e8dba20e6b90bfe6cdb435f35130ed6a4d32",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9060918b_52a79187",
        "filename": "include/spdk/string.h",
        "patchSetId": 9
      },
      "lineNbr": 80,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-12-19T08:50:24Z",
      "side": 1,
      "message": "I would add only a short sentence that input buffer is freed in any case and should not be used or passed to free(). This should be enough.",
      "parentUuid": "c7c33765_95fd41a2",
      "range": {
        "startLine": 78,
        "startChar": 73,
        "endLine": 80,
        "endChar": 77
      },
      "revId": "8b41e8dba20e6b90bfe6cdb435f35130ed6a4d32",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b833f177_05045e87",
        "filename": "include/spdk/string.h",
        "patchSetId": 9
      },
      "lineNbr": 80,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-12-19T08:59:42Z",
      "side": 1,
      "message": "Nice, simple and concise.",
      "parentUuid": "9060918b_52a79187",
      "range": {
        "startLine": 78,
        "startChar": 73,
        "endLine": 80,
        "endChar": 77
      },
      "revId": "8b41e8dba20e6b90bfe6cdb435f35130ed6a4d32",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9f899aea_a9d42b5d",
        "filename": "include/spdk/string.h",
        "patchSetId": 9
      },
      "lineNbr": 99,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-12-18T11:03:58Z",
      "side": 1,
      "message": "^",
      "range": {
        "startLine": 97,
        "startChar": 73,
        "endLine": 99,
        "endChar": 76
      },
      "revId": "8b41e8dba20e6b90bfe6cdb435f35130ed6a4d32",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "936b350f_6942e733",
        "filename": "lib/util/string.c",
        "patchSetId": 9
      },
      "lineNbr": 118,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2018-12-18T11:03:58Z",
      "side": 1,
      "message": "I think you need va_end(args_copy). See `man va_copy`. It needs to be added in spdk_vsprintf_alloc() as well.",
      "range": {
        "startLine": 118,
        "startChar": 2,
        "endLine": 118,
        "endChar": 27
      },
      "revId": "8b41e8dba20e6b90bfe6cdb435f35130ed6a4d32",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b4914f89_1541f387",
        "filename": "lib/util/string.c",
        "patchSetId": 9
      },
      "lineNbr": 118,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-12-19T07:48:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "936b350f_6942e733",
      "range": {
        "startLine": 118,
        "startChar": 2,
        "endLine": 118,
        "endChar": 27
      },
      "revId": "8b41e8dba20e6b90bfe6cdb435f35130ed6a4d32",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}