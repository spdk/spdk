{
  "comments": [
    {
      "key": {
        "uuid": "846945e1_4779c895",
        "filename": "include/spdk/nvme_spec.h",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-05-11T21:05:10Z",
      "side": 1,
      "message": "This file (nvme_spec.h) is for definitions directly from the spec, not SPDK implementation-specific limits.  I think this should go in lib/nvmf/nvmf_internal.h instead.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9e691b52_76eeeae7",
        "filename": "include/spdk/nvme_spec.h",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-05-11T21:57:30Z",
      "side": 1,
      "message": "Also the name should be SPDK_NVMF_MAX_SGL_ENTRIES (note NVME-\u003eNVMF SGE-\u003eSGL)",
      "parentUuid": "846945e1_4779c895",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3eadcf91_fab11284",
        "filename": "include/spdk/nvme_spec.h",
        "patchSetId": 2
      },
      "lineNbr": 64,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "Will move to nvmf_internal and rename as suggested.",
      "parentUuid": "9e691b52_76eeeae7",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0f192002_483288a4",
        "filename": "lib/nvmf/ctrlr_bdev.c",
        "patchSetId": 2
      },
      "lineNbr": 228,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "Looks like a new line here as well. Will take care of this as well.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "904e7e6c_04287eb6",
        "filename": "lib/nvmf/nvmf_internal.h",
        "patchSetId": 2
      },
      "lineNbr": 133,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-05-11T21:57:30Z",
      "side": 1,
      "message": "Drop data?",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e258177b_2532a7fd",
        "filename": "lib/nvmf/nvmf_internal.h",
        "patchSetId": 2
      },
      "lineNbr": 133,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "Hi Ben, I tried but saw there are quite a few places where data ptr is getting used and some of the places are new to me. I wanted understand and make sure there is no regression if get rid of dataptr. I was hoping round-2 cleanup.",
      "parentUuid": "904e7e6c_04287eb6",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9fa7c06b_3e41d24e",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-05-11T21:57:30Z",
      "side": 1,
      "message": "This isn\u0027t used anymore.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "73435308_8a211744",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "I missed this. Will fix.",
      "parentUuid": "9fa7c06b_3e41d24e",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab2a44bc_8872e0e9",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 144,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-05-11T21:57:30Z",
      "side": 1,
      "message": "the spacing between struct and the typename should remain as a space, not a tab. I don\u0027t know why the rsp struct above has tabs in it.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f216840_5de62286",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 144,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "I can take care of rsp as well.",
      "parentUuid": "ab2a44bc_8872e0e9",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44c8d043_c55e0a4c",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 876,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-05-11T21:05:10Z",
      "side": 1,
      "message": "Please line these up.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f73eb29d_e341c63f",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 876,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "Will do",
      "parentUuid": "44c8d043_c55e0a4c",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1dbe762_d6f6ecc8",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 896,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "I will take another stab at the code below and simplify as much as possible so all below comments are addressed.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "adc3ba70_d75af164",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 900,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-05-11T21:05:10Z",
      "side": 1,
      "message": "This math looks odd to me; can this be simplified to just round up instead of down?\n\nSomething like:\n\n    sge_count \u003d (rdma_req-\u003elength + rtransport-\u003eio_unit_size - 1) / rtransport-\u003eio_unit_size;",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "559d5e13_9f93a7cc",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 904,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-05-11T21:05:10Z",
      "side": 1,
      "message": "I think this check needs to be done on the final SGL entry, not just if the whole request is less than the IO unit size. We could have a final SGL entry that does not require the full io_unit_size even if there is more than one entry.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e40dc292_6f23d1b6",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 904,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "Good catch.",
      "parentUuid": "559d5e13_9f93a7cc",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "854954e2_1ae04cc6",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 908,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-05-11T21:05:10Z",
      "side": 1,
      "message": "We probably need to check first that sge_count is less than or equal to the size of the array (SPDK_NVME_MAX_SGE_ENTRIES) and fail the request if it isn\u0027t.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f645a1ef_25a7b5d8",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 919,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-05-11T21:05:10Z",
      "side": 1,
      "message": "As mentioned in the comment above, the last entry might not need the full IO unit size, so we need to account for that here (or in a special-case adjustment after the loop).",
      "range": {
        "startLine": 919,
        "startChar": 41,
        "endLine": 919,
        "endChar": 51
      },
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0a9b4efd_ca740757",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 928,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-05-11T21:57:30Z",
      "side": 1,
      "message": "You don\u0027t need this if buff check if you take my advice on line 937.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a407a677_6f93d9ce",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 937,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-05-11T21:57:30Z",
      "side": 1,
      "message": "The only way this executes is if you break on line 911. I\u0027d just put the error handling right there and return. Or make it a separate function that is called on line 911 and then returns.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "228d520b_bb446112",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 1066,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-05-11T21:57:30Z",
      "side": 1,
      "message": "Unrelated change",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4a06e780_de7d5bb3",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 1066,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "228d520b_bb446112",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10414979_d7f8b36c",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 1147,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-05-11T21:05:10Z",
      "side": 1,
      "message": "Please declare variables at the top of the scope (we don\u0027t use the C99-style variable declarations in loops elsewhere in SPDK).",
      "range": {
        "startLine": 1147,
        "startChar": 9,
        "endLine": 1147,
        "endChar": 19
      },
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28096a6c_8e8b5cc5",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 1147,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "10414979_d7f8b36c",
      "range": {
        "startLine": 1147,
        "startChar": 9,
        "endLine": 1147,
        "endChar": 19
      },
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ec640741_61197e4a",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 1209,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-05-11T21:05:10Z",
      "side": 1,
      "message": "Maybe we can just clamp the IO unit size to the largest acceptable one here instead of bailing out entirely.",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6fa8c37e_91a5084b",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 1209,
      "author": {
        "id": 1014259
      },
      "writtenOn": "2018-05-12T00:58:46Z",
      "side": 1,
      "message": "I don\u0027t have an opinion here. I\u0027m okay either way. Would you prefer I reset it to max?",
      "parentUuid": "ec640741_61197e4a",
      "revId": "62706bc18a0a5b3df92e279b707fd353c61aca7d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}