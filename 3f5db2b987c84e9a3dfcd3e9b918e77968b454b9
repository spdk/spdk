{
  "comments": [
    {
      "key": {
        "uuid": "d4c7de80_19b54678",
        "filename": "/COMMIT_MSG",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-06T22:27:44Z",
      "side": 1,
      "message": "What if instead. we removed the bdev_ocssd_config_json function completely.  Instead add a new ns-type-specific function (similar to populate_namespace functions) that the main bdev_nvme_config_json function can call for each namespace.  For \"normal\" namespaces, it would be a nop.  Your version would add the bdev_ocssd_create RPC calls.\n\nThen you\u0027d know for sure that bdev_nvme_attach_controller was always called before bdev_ocssd_create.\n\nI think it would also simplify the previous patch, because then your function would only get called for OC namespaces and you wouldn\u0027t have to iterate through all of the controller and namespaces yourself.",
      "revId": "3f5db2b987c84e9a3dfcd3e9b918e77968b454b9",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8fa1618a_24f54dd5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-12-09T14:09:56Z",
      "side": 1,
      "message": "I\u0027m not sure I fully understand your idea. How would we tie bdev_ocssd_create RPC calls to bdev_nvme_attach_controller ones? Would we be relying on the fact that bdev_ocssd_create calls are always present in the config after all of the bdev_nvme_attach_controller calls?",
      "parentUuid": "d4c7de80_19b54678",
      "revId": "3f5db2b987c84e9a3dfcd3e9b918e77968b454b9",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c1501428_96ab4ec2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-12-09T17:05:28Z",
      "side": 1,
      "message": "Yes, we would rely on the bdev_nvme_attach_controller() RPCs always getting written first.  Then anything per-namespace gets written after that.\n\nI\u0027m fine with that assumption.  I think it makes the code a lot simpler and cleaner and avoids having to support things like users purposely calling bdev_ocssd_create on a controller that doesn\u0027t exist yet.",
      "parentUuid": "8fa1618a_24f54dd5",
      "revId": "3f5db2b987c84e9a3dfcd3e9b918e77968b454b9",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e4f57d0c_9cce689a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 23
      },
      "lineNbr": 12,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-12-10T12:34:03Z",
      "side": 1,
      "message": "Yeah, that simplifies the code a lot. I was worried if we can rely on the order of entries in the config, but if you think this is fine, then it\u0027s a much cleaner solution.\n\nIn that case, I\u0027m dropping this patch and pushing one implementing config_json namespace callbacks.",
      "parentUuid": "c1501428_96ab4ec2",
      "revId": "3f5db2b987c84e9a3dfcd3e9b918e77968b454b9",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}