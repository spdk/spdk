{
  "comments": [
    {
      "key": {
        "uuid": "475f423d_6b6fc804",
        "filename": "lib/event/subsystems/nvmf/nvmf_tgt.c",
        "patchSetId": 9
      },
      "lineNbr": 113,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-09-13T17:19:05Z",
      "side": 1,
      "message": "new_qpair isn\u0027t thread safe - it can only be called from the acceptor thread. You\u0027ll have to pass a message back there I think.",
      "revId": "a54e6323f676f132636dc7c83e3cdafd78aba92a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a97a3ce6_b4293eb6",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 9
      },
      "lineNbr": 151,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-09-13T17:19:05Z",
      "side": 1,
      "message": "I think one viable strategy would be to handle errors returned by this function and fail the creation of the poll group. This call returns an error if it is unable to allocate any of the requested channels already, we just need to do something with that error here.\n\nThere are more complex scenarios where namespaces get added at run time and a channel creation fails, but let\u0027s deal with those later.",
      "revId": "a54e6323f676f132636dc7c83e3cdafd78aba92a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df74306e_1e2e3836",
        "filename": "lib/nvmf/nvmf.c",
        "patchSetId": 9
      },
      "lineNbr": 610,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-09-13T17:19:05Z",
      "side": 1,
      "message": "This is saying \"if any subsystem was able to obtain a channel on this poll group, proceed\". But what if the subsystem the qpair is targeted at wasn\u0027t able to obtain a channel? Then it is still broken. Even worse, we don\u0027t even know what subsystem the qpair is targeted at until after the first command is received, so I don\u0027t think this strategy is going to be tractable.",
      "revId": "a54e6323f676f132636dc7c83e3cdafd78aba92a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}