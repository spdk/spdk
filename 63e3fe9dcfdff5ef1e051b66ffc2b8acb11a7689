{
  "comments": [
    {
      "key": {
        "uuid": "3fcb37e3_0363a710",
        "filename": "examples/nvme/identify/identify.c",
        "patchSetId": 6
      },
      "lineNbr": 419,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-12-06T20:29:18Z",
      "side": 1,
      "message": "According to the spec, it is allowed for a discovery controller to return an error log page. Currently, our target just returns immediately, but I am not sure how the kernel target responds. I also can\u0027t think of the use case for the discovery controller returning this log page off the top of my head.\n\nswitch (lid) {\ncase SPDK_NVME_LOG_ERROR:\ncase SPDK_NVME_LOG_HEALTH_INFORMATION:\n\t\t/* TODO: actually fill out log page data */\n\t\treturn SPDK_NVMF_REQUEST_EXEC_STATUS_COMPLETE;",
      "revId": "63e3fe9dcfdff5ef1e051b66ffc2b8acb11a7689",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2dc40e9_2ce4994b",
        "filename": "examples/nvme/identify/identify.c",
        "patchSetId": 6
      },
      "lineNbr": 419,
      "author": {
        "id": 1011995
      },
      "writtenOn": "2018-12-06T20:47:28Z",
      "side": 1,
      "message": "I do concede that the NVMe-over-Fabrics-1_0a-2018.07.23 spec, Figure 32:   Discovery Controller â€“ Log Page Identifiers, does show that the Error Information (Log Identifier 01h) is indeed optional.   However, the lib/nvmf/ctrlr.c:spdk_nvmf_ctrlr_get_log_page() code which I believe you cite above, is written such that just before that code, a check is made for a subsystem-\u003esubtype \u003d\u003d SPDK_NVMF_SUBTYPE_DISCOVERY and thus takes that path instead where it fails all log ids other than SPDK_NVME_LOG_DISCOVERY.   If we want to think about altering that behavior, I would propose that be done in a separate patch.   Until such time, I would propose we retain this patch\u0027s reduced command set (when targeting Discovery) thus eliminating the error messages to the screen (on both initiator and target sides) which might otherwise alarm or confuse users.",
      "parentUuid": "3fcb37e3_0363a710",
      "revId": "63e3fe9dcfdff5ef1e051b66ffc2b8acb11a7689",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b70a0918_c60716f8",
        "filename": "examples/nvme/identify/identify.c",
        "patchSetId": 6
      },
      "lineNbr": 419,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-12-06T20:58:59Z",
      "side": 1,
      "message": "Sounds good to me!",
      "parentUuid": "f2dc40e9_2ce4994b",
      "revId": "63e3fe9dcfdff5ef1e051b66ffc2b8acb11a7689",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "179f2de8_4a32b39d",
        "filename": "lib/nvme/nvme_ctrlr.c",
        "patchSetId": 6
      },
      "lineNbr": 2734,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-12-06T22:53:34Z",
      "side": 1,
      "message": "re: ctrlr \u003d\u003d NULL check\n\nBut this goes against how the driver operates today.  If there\u0027s a desire to add ctrlr checks in all of the SPDK functions, that should be part of a discussion and patches separately from this patch.  For this patch it should just be an assert() at best.",
      "revId": "63e3fe9dcfdff5ef1e051b66ffc2b8acb11a7689",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}