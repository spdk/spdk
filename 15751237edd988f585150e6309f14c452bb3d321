{
  "comments": [
    {
      "key": {
        "uuid": "42b0b3d4_09e8f47a",
        "filename": "lib/iscsi/conn.c",
        "patchSetId": 27
      },
      "lineNbr": 1305,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-03-04T18:33:46Z",
      "side": 1,
      "message": "I think this is OK functionally - but am concerned it may confuse people who are not very familiar with how the DIF routines work.\n\nFor example, in \"normal\" case, with no extended block size, dif_strip will still be set to \"true\".  Later when we build the interleaved IOV array, it will not actually strip out any DIF information (since block size \u003d\u003d data block size) but it will require the reader of the code to investigate this in detail.\n\nShould we consider whether spdk_iscsi_get_dif_ctx should return false, if no DIF operation is needed?\n\nPlease excuse me if I have any misunderstanding on how the code is working here.",
      "revId": "15751237edd988f585150e6309f14c452bb3d321",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f33fc20_f77fd281",
        "filename": "lib/iscsi/conn.c",
        "patchSetId": 27
      },
      "lineNbr": 1305,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-03-04T23:15:16Z",
      "side": 1,
      "message": "If there is no metadata (i.e. block size \u003d\u003d data block size), spdk_dif_ctx_init returns false, and then spdk_iscsi_get_dif_ctx returns false.\n\nBut it may not be good for spdk_dif_ctx_init return false if block size \u003d\u003d data block size.\n\nI will change spdk_scsi_bdev_get_dif_ctx return false immediately without calling spdk_dif_ctx_init if there is no metadata.\n\nBdev doesn\u0027t support separate metadata yet and it will be enough to check only if metedata exists.\n\nDoes this make sense to you?",
      "parentUuid": "42b0b3d4_09e8f47a",
      "revId": "15751237edd988f585150e6309f14c452bb3d321",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}