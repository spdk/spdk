{
  "comments": [
    {
      "key": {
        "uuid": "70faf461_453cd027",
        "filename": "lib/nvme/nvme_ctrlr.c",
        "patchSetId": 6
      },
      "lineNbr": 2103,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-10-19T20:55:53Z",
      "side": 1,
      "message": "I\u0027m not sure this is the place to do it.  We call this function many times during initialization or reset.  We probably should do it in NVME_CTRLR_STATE_INIT state instead.",
      "revId": "67bfbbad08b07679e9a716525ec2de4bed58cf25",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3793b167_467d0028",
        "filename": "lib/nvme/nvme_ctrlr.c",
        "patchSetId": 6
      },
      "lineNbr": 2103,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2019-10-21T16:14:33Z",
      "side": 1,
      "message": "The reason I set it here is because nvme_ctrlr_get_cc and nvme_ctrlr_get_csts both require sending admin commands for fabrics controllers. So we need the admin qpair enabled before we even get to NVME_CTRLR_STATE_INIT.",
      "parentUuid": "70faf461_453cd027",
      "revId": "67bfbbad08b07679e9a716525ec2de4bed58cf25",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc7e84eb_0d134ca9",
        "filename": "lib/nvme/nvme_ctrlr.c",
        "patchSetId": 6
      },
      "lineNbr": 2103,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-10-21T16:50:07Z",
      "side": 1,
      "message": "OK.  That makes sense.\n\nThe question becomes: if someone reads this code in the future, will they ask \"why do we have to enable the admin queue every time this function gets called?  is there some case where it could be disabled at the end of a previous call so we have to enable it here?\"\n\nHow does this work today?  Before this patch, we don\u0027t enable the admin queue until after the ENABLE_WAIT_FOR_READY_1 state.",
      "parentUuid": "3793b167_467d0028",
      "revId": "67bfbbad08b07679e9a716525ec2de4bed58cf25",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05723176_04ffaf96",
        "filename": "lib/nvme/nvme_internal.h",
        "patchSetId": 6
      },
      "lineNbr": 436,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-10-19T20:55:53Z",
      "side": 1,
      "message": "should this comment be updated?",
      "revId": "67bfbbad08b07679e9a716525ec2de4bed58cf25",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}