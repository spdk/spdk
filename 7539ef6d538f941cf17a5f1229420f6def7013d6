{
  "comments": [
    {
      "key": {
        "uuid": "cb27a8b0_ae368dc9",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 82,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-12T14:34:34Z",
      "side": 1,
      "message": "I don\u0027t think things like these should be in a test script.\nInstalling dependencies like Vagrant and its plugins should be done in separate script, most probably test/common/config/vm_setup.sh or some new script.",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 82,
        "endChar": 3
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d142622_2c089023",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 82,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-14T07:49:58Z",
      "side": 1,
      "message": "as I said, this are workaround for host power loss and then vagrant up issue.",
      "parentUuid": "cb27a8b0_ae368dc9",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 82,
        "endChar": 3
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "381c2d85_e595c2ef",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 82,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-14T11:41:55Z",
      "side": 1,
      "message": "Host power loss?\nSorry, but I do not understand.",
      "parentUuid": "7d142622_2c089023",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 82,
        "endChar": 3
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0260c9ea_cf7ea8ab",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 82,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-17T03:15:44Z",
      "side": 1,
      "message": "hi karol,\n   This works on virtualbox 5.2, I found that host power loss , and this time VM force to power off, then if want to start, it report vagrant errors.\nIt\u0027s vagrant related , why need  to put it vm_setup.sh?",
      "parentUuid": "381c2d85_e595c2ef",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 82,
        "endChar": 3
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "750525fb_a903af4a",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 98,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-12T14:34:34Z",
      "side": 1,
      "message": "I don\u0027t think we need a function for that (and possibly other functions like this as well). Why not just call \"vagrant halt\" directly?",
      "range": {
        "startLine": 93,
        "startChar": 0,
        "endLine": 98,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1d946db7_2525f566",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 98,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-14T07:49:58Z",
      "side": 1,
      "message": "1. reduce time,remove no need behaviors.\n2. avoid error exceptions.",
      "parentUuid": "750525fb_a903af4a",
      "range": {
        "startLine": 93,
        "startChar": 0,
        "endLine": 98,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "313f3142_867be255",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 98,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-14T11:41:55Z",
      "side": 1,
      "message": "1. Reduce time? How?\n2. Any examples of errors when doing vagrant halt?",
      "parentUuid": "1d946db7_2525f566",
      "range": {
        "startLine": 93,
        "startChar": 0,
        "endLine": 98,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6e082f2f_9e3b3df3",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 98,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-17T03:15:44Z",
      "side": 1,
      "message": "vagrant halt means shut down, why need to halt a halted machine ? that likes your physical machine, you have already turned off you machine, why need to turn off it again?\nand before I met issue , so add this.",
      "parentUuid": "313f3142_867be255",
      "range": {
        "startLine": 93,
        "startChar": 0,
        "endLine": 98,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3cb729c8_787bf7cf",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 119,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-12T14:34:34Z",
      "side": 1,
      "message": "Exactly why do we need to do this?\nIs this to clean-up after some previous script execution which did not clean-up after itself?\nTo achieve this there should be traps which do the clean up.",
      "range": {
        "startLine": 110,
        "startChar": 0,
        "endLine": 119,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f5d9f11_7c2c909b",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 119,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-14T07:49:58Z",
      "side": 1,
      "message": "this looks ugly,  but if you use muti-terminal to do this, one is running libvirt and one is virtualbox, if kill process, vm will to a status power off.",
      "parentUuid": "3cb729c8_787bf7cf",
      "range": {
        "startLine": 110,
        "startChar": 0,
        "endLine": 119,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82a107a9_41579af3",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 119,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-14T11:41:55Z",
      "side": 1,
      "message": "Mutli terminal? I\u0027m a bit confused now. Does that mean these scripts are for manual testing, or for CI?\nWhy do we need multiple provider support at the same time?",
      "parentUuid": "3f5d9f11_7c2c909b",
      "range": {
        "startLine": 110,
        "startChar": 0,
        "endLine": 119,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "152bf2c2_499bbb54",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 119,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-17T03:15:44Z",
      "side": 1,
      "message": "1.vagrant_auto.sh, I put it in this vagrant folder, it not only be used to do auto test, nut also can be used by a developer.\n2. if I don\u0027t have a NVMe device , I use this scripts  to create a VM with the system that I want to verify something.And then use ./vagrant_auto.sh to run base check to verify my revision.\n3. It takes me over ten minutes to  create a VM , with SoftRoCE/NVMe... ,but destroy it with several seconds ,It\u0027s too wasteful.\n4. we usually use these tools (putty/MobaXterm...) to connect server ,and with several windows to manipulate host machine to run  Vagrant_auto.sh.\n5. Why need to support different providers, my script use the least code to do this. \n   you know that virtualbox and libvirt are different ,and they have their own advantages.\n   libvirt don\u0027t care about the NVMe list, but virtualbox always care about nvme device that are registered.\n   Vagrant 2.1 can both support these well. \n6. As a auto script, I don\u0027t want to limit the usage of personal preferences. \n   As a auto script, It\u0027s different from that manual scripts, it could deal with exceptions as \n   much as possible. Otherwise, I think it\u0027s not very auto. \n   Originally, this kind of script takes a long time to create, and if it exits with exceptions \n  , that would be a bad experience. So here adds some workarounds, may be it\u0027s not perfect.\n\nif for autotest only at the beginning . we use ./vagrant_auto.sh -e, it executes this life cycle:\n create-test-destory, confirm demo cases are ok, due to test failure not related to env.\nif want to keep the VMs, ./vagrant_auto.sh -r\nif want to re-test( already had this vm) ./vagrant_auto.sh",
      "parentUuid": "82a107a9_41579af3",
      "range": {
        "startLine": 110,
        "startChar": 0,
        "endLine": 119,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94038257_5c794fc2",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 154,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-12T14:34:34Z",
      "side": 1,
      "message": "I don\u0027t think we should go down to provider-specific commands.\nAs an end user I think  I just want to install VBox, Vagrant and simply call vagrant calls, not be involved in managing vbox.",
      "range": {
        "startLine": 147,
        "startChar": 0,
        "endLine": 154,
        "endChar": 52
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37143570_5bec11ef",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 154,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-14T07:49:58Z",
      "side": 1,
      "message": "done.\nI am worried about user can\u0027t use this, and remove this is ok.",
      "parentUuid": "94038257_5c794fc2",
      "range": {
        "startLine": 147,
        "startChar": 0,
        "endLine": 154,
        "endChar": 52
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d52b5c00_6c20ec4b",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 168,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-12T14:34:34Z",
      "side": 1,
      "message": "check_vm_status name is rather general.  What do we check for exactly in this function? Is it running/halted/etc? \nIf so, then I think \"vagrant status\" would suffice. I am highly against introducing provider-specific management tools if they are not needed.",
      "range": {
        "startLine": 159,
        "startChar": 0,
        "endLine": 168,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "649178ab_7fddb433",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 168,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-14T07:49:58Z",
      "side": 1,
      "message": "done.",
      "parentUuid": "d52b5c00_6c20ec4b",
      "range": {
        "startLine": 159,
        "startChar": 0,
        "endLine": 168,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "09e6b693_634c29f0",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 184,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-12T14:34:34Z",
      "side": 1,
      "message": "Why not jsut \"vagrant destroy\"?",
      "range": {
        "startLine": 179,
        "startChar": 0,
        "endLine": 184,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b11fb6dc_39bb25fd",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 184,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-14T07:49:58Z",
      "side": 1,
      "message": "done.",
      "parentUuid": "09e6b693_634c29f0",
      "range": {
        "startLine": 179,
        "startChar": 0,
        "endLine": 184,
        "endChar": 1
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1148e706_91e553a9",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 213,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-12T14:34:34Z",
      "side": 1,
      "message": "This could be probably done like vm_check_nvme_device() function",
      "range": {
        "startLine": 209,
        "startChar": 0,
        "endLine": 213,
        "endChar": 103
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7e71633_161bd271",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 213,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-14T07:49:58Z",
      "side": 1,
      "message": "good catch. done.",
      "parentUuid": "1148e706_91e553a9",
      "range": {
        "startLine": 209,
        "startChar": 0,
        "endLine": 213,
        "endChar": 103
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "feabd25c_6fb127c7",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 216,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-12T14:34:34Z",
      "side": 1,
      "message": "naming consistency - other functions use just small letters.\n\nAlso, function name is not very meaningful.\nIn function body I see that we ... kill some process? (clear_provider_mutex), manage vagrant plugin, vbox net interfaces?\nI\u0027m confused.",
      "range": {
        "startLine": 216,
        "startChar": 9,
        "endLine": 216,
        "endChar": 28
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3070c953_51d0090d",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 216,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-14T07:49:58Z",
      "side": 1,
      "message": "done.",
      "parentUuid": "feabd25c_6fb127c7",
      "range": {
        "startLine": 216,
        "startChar": 9,
        "endLine": 216,
        "endChar": 28
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc1cb0a8_0060bb13",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 291,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-12T14:34:34Z",
      "side": 1,
      "message": "Trap should not be removed until tests have finished.",
      "range": {
        "startLine": 291,
        "startChar": 1,
        "endLine": 291,
        "endChar": 26
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dd00dec8_4e94635e",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 291,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-14T07:49:58Z",
      "side": 1,
      "message": "I want to re-use this vm, and ssh to execute auto test, out test already had it\u0027s own trap.\nthis are remote executing. \nhere we only need  to kill sock.\nonce it be created sucessfully,  we can use ./vagrant_auto.sh  to retest.",
      "parentUuid": "fc1cb0a8_0060bb13",
      "range": {
        "startLine": 291,
        "startChar": 1,
        "endLine": 291,
        "endChar": 26
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5ac029f_e3458d3f",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 291,
      "author": {
        "id": 1011256
      },
      "writtenOn": "2019-06-14T11:41:55Z",
      "side": 1,
      "message": "Re-use - I asked this question a few lines before: does that mean you use these scripts for manual tests?\nIf you remove the trap here, then we won\u0027t be able to do a proper clean-up routine if we run automated tests in CI.",
      "parentUuid": "dd00dec8_4e94635e",
      "range": {
        "startLine": 291,
        "startChar": 1,
        "endLine": 291,
        "endChar": 26
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8be057fa_d4d23d79",
        "filename": "scripts/vagrant/vagrant_auto.sh",
        "patchSetId": 41
      },
      "lineNbr": 291,
      "author": {
        "id": 1014536
      },
      "writtenOn": "2019-06-17T03:15:44Z",
      "side": 1,
      "message": "As I said before ,if you want to clean at test, please use ./vagrant_auto -e.\nNot only manual test, but also can reuse for developer.",
      "parentUuid": "b5ac029f_e3458d3f",
      "range": {
        "startLine": 291,
        "startChar": 1,
        "endLine": 291,
        "endChar": 26
      },
      "revId": "7539ef6d538f941cf17a5f1229420f6def7013d6",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}