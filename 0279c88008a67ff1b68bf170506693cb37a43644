{
  "comments": [
    {
      "key": {
        "uuid": "b357eb94_615f6468",
        "filename": "lib/ftl/ftl_io.h",
        "patchSetId": 21
      },
      "lineNbr": 231,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-12-18T20:01:24Z",
      "side": 1,
      "message": "But it would be safer from a typing perspective to do things like:\n\nstruct ftl_md_io *md_io;\n\nmd_io-\u003eio.flags \u0026\u003d ~(SOME_FLAG | SOME_FLAG2);\n\ninstead of\n\nftl_io_clear_flags(md_io, SOME_FLAG | SOME_FLAG2);\n\nThis would be less prone to errors - things like requiring that the base ftl_io structure is the first member in the derived struct.  It also looks like maybe removing the macros makes the code smaller too (from a number of characters perspective), and would be one less layer of indirection for code readers.",
      "revId": "0279c88008a67ff1b68bf170506693cb37a43644",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "86d08e15_cd04e57d",
        "filename": "lib/ftl/ftl_io.h",
        "patchSetId": 21
      },
      "lineNbr": 231,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2018-12-19T10:13:50Z",
      "side": 1,
      "message": "I would argue that the it is easier to read the second version, as you see the intent (clear flags SOME_FLAG and SOME_FLAG2 from the md_io) and you don\u0027t have to worry about the underlying structures (that md_io has a member called \u0027io\u0027 that is not a pointer and is the one holding the flags that we want to clear). But if this is not a pattern that we want to use in SPDK, I\u0027ll get rid of these.",
      "parentUuid": "b357eb94_615f6468",
      "revId": "0279c88008a67ff1b68bf170506693cb37a43644",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2279d671_52cbd119",
        "filename": "lib/ftl/ftl_trace.h",
        "patchSetId": 21
      },
      "lineNbr": 81,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-12-18T20:01:24Z",
      "side": 1,
      "message": "Can we just remove FTL_TRACE_ENABLED?\n\nFor other modules (nvmf, bdev, iscsi), the tracing is automatically enabled - it\u0027s not a compile time option.",
      "revId": "0279c88008a67ff1b68bf170506693cb37a43644",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59feb6f8_06b471cb",
        "filename": "lib/ftl/ftl_trace.h",
        "patchSetId": 21
      },
      "lineNbr": 81,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2018-12-19T15:07:07Z",
      "side": 1,
      "message": "This flag is temporarily needed up to commit with trace implementation. I will remove this flag in trace commit.",
      "parentUuid": "2279d671_52cbd119",
      "revId": "0279c88008a67ff1b68bf170506693cb37a43644",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}