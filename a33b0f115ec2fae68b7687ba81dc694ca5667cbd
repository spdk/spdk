{
  "comments": [
    {
      "key": {
        "uuid": "d34e4395_19a7921b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1013097
      },
      "writtenOn": "2018-09-17T15:00:01Z",
      "side": 1,
      "message": "OK, so the error is not logged to console but the error is actually generated and the QP state is set to IBV_QPS_ERR.\nIs it the behavior you are looking for?",
      "range": {
        "startLine": 14,
        "startChar": 41,
        "endLine": 15,
        "endChar": 37
      },
      "revId": "a33b0f115ec2fae68b7687ba81dc694ca5667cbd",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eb2bf830_f837dc35",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1014690
      },
      "writtenOn": "2018-09-17T15:58:45Z",
      "side": 1,
      "message": "yes. I just want the flush error not to be logged and not to alter the completion error handling.",
      "parentUuid": "d34e4395_19a7921b",
      "range": {
        "startLine": 14,
        "startChar": 41,
        "endLine": 15,
        "endChar": 37
      },
      "revId": "a33b0f115ec2fae68b7687ba81dc694ca5667cbd",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fb44fb8_a4e50d1c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1013097
      },
      "writtenOn": "2018-09-17T16:22:42Z",
      "side": 1,
      "message": "This code change confuses me a bit - the use case seems to be too specific to your setup.\nThe log output could be filtered out with grep or spdk cmd line settings after all...",
      "range": {
        "startLine": 14,
        "startChar": 41,
        "endLine": 15,
        "endChar": 37
      },
      "revId": "a33b0f115ec2fae68b7687ba81dc694ca5667cbd",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d163b6d_2c777666",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1014690
      },
      "writtenOn": "2018-09-17T16:23:57Z",
      "side": 1,
      "message": "Sorry, I think I am wrong.\nMy assumption of spdk code was, we get this flush errors after QP is moved to error.\nI think the Flush error can be ignored and the for loop to be continued with out setting error.\nI mean the QP should not attempt the connection tear down or the QP error recovery(I am not sure about this part, looking into the code). I will send out a revised patch. PLease let me know your thoughts.",
      "parentUuid": "eb2bf830_f837dc35",
      "range": {
        "startLine": 14,
        "startChar": 41,
        "endLine": 15,
        "endChar": 37
      },
      "revId": "a33b0f115ec2fae68b7687ba81dc694ca5667cbd",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1c7de80_ee3396c8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1014690
      },
      "writtenOn": "2018-09-17T16:46:57Z",
      "side": 1,
      "message": "\u003eThis code change confuses me a bit - the use case seems to be too specific to your setup.\n\u003eThe log output could be filtered out with grep or spdk cmd line settings after all...\n\nNo I dont think so, And it is not specific with iwarp too. This should be purely application specific(how the connection is disconnected). BTW the applicatio I use is fio. I will try with IB/ROCE and update you the results.",
      "parentUuid": "4d163b6d_2c777666",
      "range": {
        "startLine": 14,
        "startChar": 41,
        "endLine": 15,
        "endChar": 37
      },
      "revId": "a33b0f115ec2fae68b7687ba81dc694ca5667cbd",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "825bdcda_c3f60c13",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1014690
      },
      "writtenOn": "2018-09-17T16:54:45Z",
      "side": 1,
      "message": "\u003e \u003eThis code change confuses me a bit - the use case seems to be too specific to your setup.\n\u003e \u003eThe log output could be filtered out with grep or spdk cmd line settings after all...\n\u003e \n\u003e No I dont think so, And it is not specific with iwarp too. This should be purely application specific(how the connection is disconnected). BTW the applicatio I use is fio. I will try with IB/ROCE and update you the results.\n\nI see the same logs with iwarp and ib/roce devices aswell with fio application.\n\nrdma.c:2633:spdk_nvmf_rdma_poller_poll: *WARNING*: CQ error on CQ 0x14995c000a70, Request 0x22648908800960 (5): Work Request Flushed Error\nrdma.c: 500:spdk_nvmf_rdma_set_ibv_state: *NOTICE*: IBV QP#0 changed to: IBV_QPS_ERR\nrdma.c:2633:spdk_nvmf_rdma_poller_poll: *WARNING*: CQ error on CQ 0x14995c000a70, Request 0x22648908801056 (5): Work Request Flushed Error\nrdma.c: 500:spdk_nvmf_rdma_set_ibv_state: *NOTICE*: IBV QP#0 changed to: IBV_QPS_ERR\nrdma.c:2633:spdk_nvmf_rdma_poller_poll: *WARNING*: CQ error on CQ 0x14995c000a70, Request 0x22648908801152 (5): Work Request Flushed Error\nrdma.c: 500:spdk_nvmf_rdma_set_ibv_state: *NOTICE*: IBV QP#0 changed to: IBV_QPS_ERR\n\n\nHere is an example of similar thing done in kernel nvmf: nvmet_rdma_send_done()(linux:drivers/nvme/target/rdma.c)\n\nI am not totaly aware of spdk nvmf implementation, shall look chack it out if i missing anything here and post the next revision of this patch.\nAlso please let me know if I am missing something.\nThanks!",
      "parentUuid": "e1c7de80_ee3396c8",
      "range": {
        "startLine": 14,
        "startChar": 41,
        "endLine": 15,
        "endChar": 37
      },
      "revId": "a33b0f115ec2fae68b7687ba81dc694ca5667cbd",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0e23daa4_24b33706",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 2639,
      "author": {
        "id": 1013097
      },
      "writtenOn": "2018-09-17T15:02:00Z",
      "side": 1,
      "message": "The error condition is raised here.",
      "revId": "a33b0f115ec2fae68b7687ba81dc694ca5667cbd",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37cc31c7_487559d4",
        "filename": "lib/nvmf/rdma.c",
        "patchSetId": 2
      },
      "lineNbr": 2667,
      "author": {
        "id": 1013097
      },
      "writtenOn": "2018-09-17T15:02:00Z",
      "side": 1,
      "message": "The QP is put to error state here.",
      "range": {
        "startLine": 2667,
        "startChar": 3,
        "endLine": 2667,
        "endChar": 53
      },
      "revId": "a33b0f115ec2fae68b7687ba81dc694ca5667cbd",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}