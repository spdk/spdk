{
  "comments": [
    {
      "key": {
        "uuid": "31f08138_0aaa9919",
        "filename": "examples/bdev/fio_plugin/Makefile",
        "patchSetId": 26
      },
      "lineNbr": 46,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-30T18:20:09Z",
      "side": 1,
      "message": "we should not add event - see bdev_aio.c comments for how to remove this",
      "revId": "b7c75197818c72280249cdc05379c2fd8047145a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "029d9f82_e9dddc1f",
        "filename": "lib/bdev/aio/bdev_aio.c",
        "patchSetId": 26
      },
      "lineNbr": 223,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-30T18:10:05Z",
      "side": 1,
      "message": "i think here we should assert that a reset is in progress - if we get here and there is not a reset in progress, that is a major software bug and we should not ignore it",
      "revId": "b7c75197818c72280249cdc05379c2fd8047145a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d16c7fe_2f2372b4",
        "filename": "lib/bdev/aio/bdev_aio.c",
        "patchSetId": 26
      },
      "lineNbr": 285,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2017-11-30T17:32:09Z",
      "side": 1,
      "message": "This global fdisk-\u003ereset_in_progress flag isn\u0027t necessary and introduces race conditions. Remove it.\n\nThe generic bdev layer will only send a single reset at a time, so you don\u0027t have to guard against that here. In bdev_aio_reset, just call spdk_for_each_channel. In the completion callback for the iteration, if it succeeded complete the I/O. If it failed, start a poller for 1ms and then call spdk_for_each_channel again.",
      "revId": "b7c75197818c72280249cdc05379c2fd8047145a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d5fd47f5_ac900197",
        "filename": "lib/bdev/aio/bdev_aio.c",
        "patchSetId": 26
      },
      "lineNbr": 288,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2017-11-30T17:32:09Z",
      "side": 1,
      "message": "It is safe to unregister a poller from within the poller context. We wrote the poller code carefully just so this would be supported. You don\u0027t need the event.",
      "revId": "b7c75197818c72280249cdc05379c2fd8047145a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "784b5c5e_fa38ea7c",
        "filename": "lib/bdev/aio/bdev_aio.c",
        "patchSetId": 26
      },
      "lineNbr": 288,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-30T18:10:05Z",
      "side": 1,
      "message": "you don\u0027t need to allocate an event - you can just unregister the poller here\n\nin fact, that\u0027s exactly what you need to do - we do not want to call spdk_event_allocate/spdk_event_call in a bdev module",
      "revId": "b7c75197818c72280249cdc05379c2fd8047145a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d4b8430_e4b27d7a",
        "filename": "lib/bdev/aio/bdev_aio.c",
        "patchSetId": 26
      },
      "lineNbr": 298,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-30T18:10:05Z",
      "side": 1,
      "message": "do you need a flag and a task pointer?  or can we just use the task pointer?  if the task pointer is not NULL, then a reset is in progress",
      "revId": "b7c75197818c72280249cdc05379c2fd8047145a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d972cc4e_1e16f7d4",
        "filename": "lib/bdev/aio/bdev_aio.c",
        "patchSetId": 26
      },
      "lineNbr": 301,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-30T18:10:05Z",
      "side": 1,
      "message": "I don\u0027t think you should do this check or create the poller here - you should only do a retry timer if the for_each_channel() finishes and there were still I/O outstanding",
      "revId": "b7c75197818c72280249cdc05379c2fd8047145a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e20c1a84_45494617",
        "filename": "lib/bdev/aio/bdev_aio.c",
        "patchSetId": 26
      },
      "lineNbr": 520,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-30T18:10:05Z",
      "side": 1,
      "message": "why change this?",
      "revId": "b7c75197818c72280249cdc05379c2fd8047145a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7981d41_d912a6af",
        "filename": "lib/bdev/aio/bdev_aio.h",
        "patchSetId": 26
      },
      "lineNbr": 56,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2017-11-30T18:20:09Z",
      "side": 1,
      "message": "traditionally we\u0027ve always kept the spdk_bdev field first - does this need to be changed?",
      "revId": "b7c75197818c72280249cdc05379c2fd8047145a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}