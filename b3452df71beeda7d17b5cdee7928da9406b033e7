{
  "comments": [
    {
      "key": {
        "uuid": "602b48e7_06b10c64",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 4,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2018-10-27T22:03:32Z",
      "side": 1,
      "message": "I think you need a high level explanation of how this library/algorithm maps to something that actually does the compression, like what we\u0027ll be starting off with at least using CompressDev.  For a new person reading this, I think they will get lost pretty quick without getting \"the big picture\" first",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "157df130_d540fa65",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 4,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-11-01T00:13:36Z",
      "side": 1,
      "message": "Ack.  I wrote this doc originally for a different audience - you\u0027re right it needs some big picture stuff now that it\u0027s getting merged into SPDK.",
      "parentUuid": "602b48e7_06b10c64",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d83aad80_225c2633",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 6,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2018-10-27T22:03:32Z",
      "side": 1,
      "message": "we should probably have some short description/link or something here to SNIA PM instead of assuming everyone will know that this is - but they should by now :)",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "26515038_5a4ec087",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 6,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-11-01T00:13:36Z",
      "side": 1,
      "message": "I\u0027ll trust that anyone who doesn\u0027t know what persistent memory is can google it.  :)",
      "parentUuid": "d83aad80_225c2633",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "93af7add_0d513482",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 6,
      "author": {
        "id": 1015365
      },
      "writtenOn": "2018-11-01T23:36:15Z",
      "side": 1,
      "message": "Also, can you please make it clear if the solution is intended to work without PM? For systems that don\u0027t have PM, will the design allow such compression offload to work simply with DDR4? Our system may not have PM support for a bit. So hosting the metadata in another SSD or DDR4 would help a lot.",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d405d0c4_c9098c27",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1015365
      },
      "writtenOn": "2018-11-01T23:36:15Z",
      "side": 1,
      "message": "First off, thank you Jim for the excellent doc. It explained the concepts really well, cannot thank you enough for such a nice doc. I have some minor nit comments.\n\nI maybe wrong but one of the main points that I understood of this feature was the ability to offload some of the storage features onto other assist-devices (mostly separate hardware). So the reduce feature allows for offloading of storage-compression to other hardware, in an attempt to reduce host-side cpu/resource(s) consumption and free up host resources for other tasks. If that is the case, maybe it would help to make it clear and explicit right at the beginning.",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47651190_f3b90d62",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2018-10-27T22:03:32Z",
      "side": 1,
      "message": "I\u0027d consider IO instead of io throughout",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cdf30aeb_ed8f98c6",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-11-01T00:13:36Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "47651190_f3b90d62",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b4fd3a10_cf4371df",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 28,
      "author": {
        "id": 1015365
      },
      "writtenOn": "2018-11-01T23:36:15Z",
      "side": 1,
      "message": "Nit : If N backing IO units are associated with each chunk, then this should be 0 to N-1.",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "abd46f5a_25b69f39",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 1015365
      },
      "writtenOn": "2018-11-01T23:36:15Z",
      "side": 1,
      "message": "Sorry another Nit : if it is not too late and if it is still possible to use some easily referenced term for \"Backing IO unit\", it\u0027d be welcome. Or maybe it is a matter of me getting used to saying that repeatedly :-) Something like bsPage or something easier maybe helpful.",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f288a82_2dcdc625",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2018-10-27T22:03:32Z",
      "side": 1,
      "message": "maybe spell the word \"two\" or do a \"2 x 4KB\"",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4e02a9ea_53239c24",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 33,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-11-01T00:13:36Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1f288a82_2dcdc625",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1b9c9b8d_41d3e6ca",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 49,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2018-10-27T22:03:32Z",
      "side": 1,
      "message": "Can other values be used? If not I\u0027d remove the \"for example\"",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "608aa95d_b2ed4ab0",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 49,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-11-01T00:13:36Z",
      "side": 1,
      "message": "Ack - yeah, now that this really describes the implementation (and not just the general idea), I can put in specifics.",
      "parentUuid": "1b9c9b8d_41d3e6ca",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "528225ab_f367fae6",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 136,
      "author": {
        "id": 1015365
      },
      "writtenOn": "2018-11-01T23:36:15Z",
      "side": 1,
      "message": "Why is this necessary or important? ie. copying the 4KB incoming data to offset 8KB of this temp buffer? Does it make a difference if it is simply occupying the lowest (LSB + 4K) region of the buffer before being used for compression and the result copied to the dest buffer?",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b461e77_2cf44837",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 178,
      "author": {
        "id": 1015365
      },
      "writtenOn": "2018-11-01T23:36:15Z",
      "side": 1,
      "message": "I maybe missing something here, so this is not a comment really. Rather trying to understand how this works: 1. The initial data read from blocking-io-unit 2 was 4KB. So when decompressed it should probably expand to something \u003e\u003d 4KB. Let us say it decompresses to 8KB. So when we try to write this 8KB into the allocated 16KB buffer (which is made of four 4KB units) where do we copy this 8KB which takes up 2 4KB units. My point is, if we copy this to the units 0 and 1 then that itself takes up till offset 8K of the allocated buffer. Then how do we copy the incoming 4K of data to offset 4KB of the uncompressed buffer. I think I am missing something here, so any input will help. Thanks.",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5dd99b69_93c0c4de",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 222,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2018-10-27T22:03:32Z",
      "side": 1,
      "message": "I assume it will also send an actual unmap to the backing device?",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3cd844a7_c969590c",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 222,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-11-01T00:13:36Z",
      "side": 1,
      "message": "Eventually.  Not for the initial implementation though.  And I think it might be done better as a background operation rather than inline - since unmap operations will result in freeing a bunch of potentially contiguous 4KB blocks on disk, and 4KB unmaps suck from a performance perspective.",
      "parentUuid": "5dd99b69_93c0c4de",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7d11d56_e58a5c78",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 242,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2018-10-27T22:03:32Z",
      "side": 1,
      "message": "Maybe define what \"restart\" means.  System reboot, SPDK application stop/start, is there some other level of load/unload?",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a00a479_31dd116c",
        "filename": "doc/compression.md",
        "patchSetId": 4
      },
      "lineNbr": 242,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-11-01T00:13:36Z",
      "side": 1,
      "message": "Ack.",
      "parentUuid": "f7d11d56_e58a5c78",
      "revId": "b3452df71beeda7d17b5cdee7928da9406b033e7",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}