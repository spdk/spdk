{
  "comments": [
    {
      "key": {
        "uuid": "c8039650_d74b4092",
        "filename": "lib/nvmf/tcp.c",
        "patchSetId": 4
      },
      "lineNbr": 2648,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-01-15T06:11:29Z",
      "side": 1,
      "message": "spdk_nvmf_tcp_poll_group_handle_timeout() may call spdk_nvmf_qpair_disconnect() to the tqpair again?\n\nHow about using the same mechanism as iscsi?\n\nIf we can take it, we may able to add\n\nTAILQ_FOREACH_SAFE(tqpair, \u0026tgroup-\u003eqpairs, link, tmp) {\n        if (tqpair-\u003estate \u003d\u003d NVME_TCP_QPAIR_STATE_EXITING) {\n                /* to prevent the state is set again */\n                tqpair-\u003estate \u003d NVME_TCP_QPAIR_STATE_EXITED;\n                SPDK_DEBUGLOG(SPDK_LOG_NVMF_TCP, \"will disconect the tqpair\u003d%p\\n\", tqpair);\n                spdk_nvmf_qpair_disconnect(\u0026tqpair-\u003eqpair, NULL, NULL);\n}\n\nto spdk_nvmf_tcp_poll_group_poll().\n\nPlease see spdk_iscsi_poll_group_poll() in lib/iscsi/iscsi_subsystem.c",
      "range": {
        "startLine": 2645,
        "startChar": 0,
        "endLine": 2648,
        "endChar": 57
      },
      "revId": "35cf263115f4dcb9791c70c075aebb8ebfef9348",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2002e68c_b170c2ee",
        "filename": "lib/nvmf/tcp.c",
        "patchSetId": 4
      },
      "lineNbr": 2648,
      "author": {
        "id": 1011275
      },
      "writtenOn": "2019-01-15T06:38:17Z",
      "side": 1,
      "message": "Hi Shuei,\nYou are right, the iscsi code is also written by me. But this time, we can put into the single qpair, it is same. Let me change line 2645 to tqpair-\u003estate \u003d NVME_TCP_QPAIR_STATE_EXITED;",
      "parentUuid": "c8039650_d74b4092",
      "range": {
        "startLine": 2645,
        "startChar": 0,
        "endLine": 2648,
        "endChar": 57
      },
      "revId": "35cf263115f4dcb9791c70c075aebb8ebfef9348",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cfe85370_84c7fbdd",
        "filename": "lib/nvmf/tcp.c",
        "patchSetId": 4
      },
      "lineNbr": 2648,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-01-15T06:41:46Z",
      "side": 1,
      "message": "Thank you, your update makes sense and is nice to me.",
      "parentUuid": "2002e68c_b170c2ee",
      "range": {
        "startLine": 2645,
        "startChar": 0,
        "endLine": 2648,
        "endChar": 57
      },
      "revId": "35cf263115f4dcb9791c70c075aebb8ebfef9348",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}