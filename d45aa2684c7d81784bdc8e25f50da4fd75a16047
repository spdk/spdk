{
  "comments": [
    {
      "key": {
        "uuid": "37c5b203_ebedbb20",
        "filename": "lib/bdev/nvme/nvme_rpc.c",
        "patchSetId": 15
      },
      "lineNbr": 549,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-12-11T23:00:22Z",
      "side": 1,
      "message": "You should save ret to tmp_ret before every realloc() call because ret will be lost and cannot be freed if realloc() fails.\n\nSomething like:\n\n  char *tmp \u003d NULL, *tmp_ret \u003d NULL;\n\n  ret \u003d spdk_sprintf_alloc(\"NVMe ...\");\n  if (!ret)\n    goto mem_err;\n\n  for_each(i) {\n    tmp_ret \u003d ret;\n    tmp \u003d spdk_sprintf_alloc(\" %x \", i);\n    ret \u003d spdk_sprintf_realloc(\"%s%s\", ret, tmp);\n    if (!tmp || !ret)\n      goto mem_err;\n  }\n\n\nmem_err:\n\tfree(tmp);\n\tfree(tmp_ret);",
      "range": {
        "startLine": 548,
        "startChar": 0,
        "endLine": 549,
        "endChar": 47
      },
      "revId": "d45aa2684c7d81784bdc8e25f50da4fd75a16047",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}