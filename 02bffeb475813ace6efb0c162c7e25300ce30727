{
  "comments": [
    {
      "key": {
        "uuid": "52399d79_982c65b1",
        "filename": "lib/event/reactor.c",
        "patchSetId": 11
      },
      "lineNbr": 536,
      "author": {
        "id": 1011715
      },
      "writtenOn": "2018-06-17T22:07:38Z",
      "side": 1,
      "message": "I noticed having now \u003d spdk_get_ticks() here was causing performance drop up to 25%. It was coming from running context_switch_monitor timer poller running all the time. Looks like having now here caused timer poller execution to not function correctly as expected. in-lining it seem to solve it. I could take 2 variable approach as well, but thought in-lining is OK.",
      "revId": "02bffeb475813ace6efb0c162c7e25300ce30727",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6ecdbc7_0a1ba04d",
        "filename": "lib/event/reactor.c",
        "patchSetId": 11
      },
      "lineNbr": 536,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-06-18T23:13:18Z",
      "side": 1,
      "message": "Why does now \u003d spdk_get_ticks() cause a 25% performance drop though?  It can\u0027t just be saving it in a local variable.  It must be the updating \u0027now\u0027 here causes problems elsewhere.\n\nI\u0027d like to understand this more through before we proceed further on committing this patch.",
      "parentUuid": "52399d79_982c65b1",
      "revId": "02bffeb475813ace6efb0c162c7e25300ce30727",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ccc0d1ef_3824d4a2",
        "filename": "lib/event/reactor.c",
        "patchSetId": 11
      },
      "lineNbr": 536,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-06-18T23:17:12Z",
      "side": 1,
      "message": "Your new policy is to update stats for each of event, poller, and timer? It looks that add_tsc_stats is called every after action.\n\nAnd I think calling get_ticks() in the add_tsc_stats() may be clean. Inlining get_ticks() or passing now as arguments may be not so meaningful.",
      "parentUuid": "52399d79_982c65b1",
      "revId": "02bffeb475813ace6efb0c162c7e25300ce30727",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87780bbf_bd330084",
        "filename": "lib/event/reactor.c",
        "patchSetId": 11
      },
      "lineNbr": 542,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-06-18T23:17:12Z",
      "side": 1,
      "message": "updating now at the line 536 affected this now?",
      "range": {
        "startLine": 542,
        "startChar": 48,
        "endLine": 542,
        "endChar": 51
      },
      "revId": "02bffeb475813ace6efb0c162c7e25300ce30727",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}