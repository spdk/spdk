{
  "comments": [
    {
      "key": {
        "uuid": "3967803e_9c1f1f42",
        "filename": "lib/event/subsystems/nvmf/nvmf_tgt.c",
        "patchSetId": 7
      },
      "lineNbr": 166,
      "author": {
        "id": 1013512
      },
      "writtenOn": "2018-09-05T06:48:14Z",
      "side": 1,
      "message": "The memory allocated here is not freed as of now. I was thinking of adding a function, say remove_qpair_cb and pass it to spdk_nvmf_tgt_accept. This memory can be freed when the cb is called from the disconnect context. Please suggest.",
      "revId": "d9131f345c776cf96a36f283e4edbc0a9c5ebeed",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f95f34c4_18d3c600",
        "filename": "lib/event/subsystems/nvmf/nvmf_tgt.c",
        "patchSetId": 7
      },
      "lineNbr": 166,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-09-05T19:41:50Z",
      "side": 1,
      "message": "You can loop over g_nvmf_tgt_host_trids and free them all in nvmf_tgt_destroy_done().",
      "parentUuid": "3967803e_9c1f1f42",
      "revId": "d9131f345c776cf96a36f283e4edbc0a9c5ebeed",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4561ddd4_a13a5752",
        "filename": "lib/event/subsystems/nvmf/nvmf_tgt.c",
        "patchSetId": 7
      },
      "lineNbr": 166,
      "author": {
        "id": 1013512
      },
      "writtenOn": "2018-09-06T03:03:45Z",
      "side": 1,
      "message": "nvmf_tgt_destroy_done is called only when target is destroyed. If the target runs for a long time and hosts disconnect and connect with a different IP, there will be many stale entries in the list which will only increase the connect time for new connections.Are there any drawbacks in freeing through remove_qpair_cb. Since spdk_nvmf_tgt_accept also handles disconnects, I thought of freeing through the remove_qpair_cb. Please correct me if I\u0027m wrong.",
      "parentUuid": "f95f34c4_18d3c600",
      "revId": "d9131f345c776cf96a36f283e4edbc0a9c5ebeed",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "154addb3_887199c0",
        "filename": "lib/event/subsystems/nvmf/nvmf_tgt.c",
        "patchSetId": 7
      },
      "lineNbr": 166,
      "author": {
        "id": 1013512
      },
      "writtenOn": "2018-09-10T04:20:28Z",
      "side": 1,
      "message": "The memory is freed in nvmf_tgt_destroy_done()",
      "parentUuid": "4561ddd4_a13a5752",
      "revId": "d9131f345c776cf96a36f283e4edbc0a9c5ebeed",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}