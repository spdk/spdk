{
  "comments": [
    {
      "key": {
        "uuid": "7c40227a_5d7bfe38",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 517,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-06-19T20:51:06Z",
      "side": 1,
      "message": "I think you can keep took_action \u003d true in its original location.\n\nOr if not, why does it need to be moved?",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "abbed29a_8598251a",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 517,
      "author": {
        "id": 1011715
      },
      "writtenOn": "2018-06-19T21:01:53Z",
      "side": 1,
      "message": "Actually that was from one of the comment from Shuhei that says let\u0027s have (now, spdk_reactor_add_tsc_stats, took_action) one after the other.",
      "parentUuid": "7c40227a_5d7bfe38",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5df2cd16_4755478f",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 517,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-06-19T23:06:28Z",
      "side": 1,
      "message": "reactor_add_tsc_stats() is called in the if block of took_action first.\nBut reactor_add_tsc_stats() is decoupled with took_action now.\nHence as Jim says, you can move took_action to the original position.\nSorry for my wrong feedback.",
      "parentUuid": "abbed29a_8598251a",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5714dea7_76ed6162",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 517,
      "author": {
        "id": 1011715
      },
      "writtenOn": "2018-06-19T23:11:42Z",
      "side": 1,
      "message": "No worries Shuhei. Thanks for your comments!",
      "parentUuid": "5df2cd16_4755478f",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "edfb5906_32bbaeba",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 528,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-06-19T23:06:28Z",
      "side": 1,
      "message": "I understood that this technique is not to make gap between timer and event/poller.",
      "range": {
        "startLine": 528,
        "startChar": 3,
        "endLine": 528,
        "endChar": 30
      },
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "637846df_fbffcf37",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 532,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-06-19T20:51:06Z",
      "side": 1,
      "message": "You can just declare the local variable here, with a newline after it - since it\u0027s only needed in this one small portion of the function.",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "70bced83_372b8e1d",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 532,
      "author": {
        "id": 1011715
      },
      "writtenOn": "2018-06-19T21:01:53Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "637846df_fbffcf37",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "863b0743_6246aadd",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 535,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-06-19T20:51:06Z",
      "side": 1,
      "message": "Suggest putting a comment here explaining why you need tmp_timer_tsc.  This might trip someone else in the future who foolishly thinks it\u0027s not needed.  :-)\n\nMaybe:\n\nSave the tsc from before poller-\u003efn was executed.  We want to use the current time for idle/busy accounting, but want to use the older time to reinsert the poller below.",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e599fb62_17bd14eb",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 535,
      "author": {
        "id": 1011715
      },
      "writtenOn": "2018-06-19T21:01:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "863b0743_6246aadd",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5459ce0e_e2a7ca07",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 535,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-06-19T23:06:28Z",
      "side": 1,
      "message": "This is just a comment and please don\u0027t take it.\n\nyou don\u0027t have to use now to update next_run_tick actually. updating by\n while (rdtsc \u003e\u003d next_run_tick) { next_run_tick +\u003d period_ticks }\nmay be better way in SMT or general OS/hypervisor world.\nThis may not apply to SPDK though.",
      "parentUuid": "e599fb62_17bd14eb",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "540c71f0_e0b834ad",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 539,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-06-19T20:51:06Z",
      "side": 1,
      "message": "same here - took_action assignment doesn\u0027t need to be moved",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a149ceb0_18af5d3d",
        "filename": "lib/event/reactor.c",
        "patchSetId": 12
      },
      "lineNbr": 539,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-06-19T23:06:28Z",
      "side": 1,
      "message": "same as above.",
      "parentUuid": "540c71f0_e0b834ad",
      "revId": "1cb735f77cdd73ad261f5e11eebcbd0c3b2037ac",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}