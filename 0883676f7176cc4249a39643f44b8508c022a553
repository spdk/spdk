{
  "comments": [
    {
      "key": {
        "uuid": "9dce1dab_fe0645be",
        "filename": "lib/nvmf/nvmf_internal.h",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2019-01-16T18:49:54Z",
      "side": 1,
      "message": "There might be a slightly better way to manage this cache that doesn\u0027t require a separate memory allocation using TAILQ.\n\nFirst, define a structure like this:\n\nstruct spdk_nvmf_transport_poll_group_cache_buffer {\n    TAILQ_ENTRY(spdk_nvmf_transport_poll_group_cache_buffer) link;\n};\n\nThen, in spdk_nvmf_transport_poll_group, just add a TAILQ via TAILQ_HEAD (TAILQ_HEAD(, spdk_nvmf_transport_poll_group_cache_buffer) buffer_cache;)\n\nThen, when you pull a buffer out of the main mempool you\u0027ll end up with a void *. Just cast that void * to an spdk_nvmf_transport_poll_group_cache_buffer and do TAILQ_INSERT_TAIL on the list.",
      "revId": "0883676f7176cc4249a39643f44b8508c022a553",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b69e9aef_c76ea63a",
        "filename": "lib/nvmf/nvmf_internal.h",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2019-01-16T20:40:30Z",
      "side": 1,
      "message": "Ah yeah, that\u0027s slick. Will do.",
      "parentUuid": "9dce1dab_fe0645be",
      "revId": "0883676f7176cc4249a39643f44b8508c022a553",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "63116c2d_68bc9a37",
        "filename": "lib/nvmf/nvmf_internal.h",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2019-01-17T19:27:14Z",
      "side": 1,
      "message": "I first saw someone embed the list pointers into the buffer itself in a buffer pool implementation 7 or 8 years ago on a project I used to work on. The author of that buffer pool? Jim Harris.",
      "parentUuid": "b69e9aef_c76ea63a",
      "revId": "0883676f7176cc4249a39643f44b8508c022a553",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69235b83_27e42dbf",
        "filename": "lib/nvmf/nvmf_internal.h",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-01-17T19:40:20Z",
      "side": 1,
      "message": "haha",
      "parentUuid": "63116c2d_68bc9a37",
      "revId": "0883676f7176cc4249a39643f44b8508c022a553",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a79972a_b4c5168b",
        "filename": "lib/nvmf/nvmf_internal.h",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-01-17T19:43:00Z",
      "side": 1,
      "message": "I think something similar was done in Sunrise Lake FW.  So it\u0027s entirely possible that this idea originated with Nate.",
      "parentUuid": "69235b83_27e42dbf",
      "revId": "0883676f7176cc4249a39643f44b8508c022a553",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87a4a731_8136f15b",
        "filename": "lib/nvmf/nvmf_internal.h",
        "patchSetId": 3
      },
      "lineNbr": 105,
      "author": {
        "id": 1011275
      },
      "writtenOn": "2019-01-18T08:01:49Z",
      "side": 1,
      "message": "This is workable. When it is used as buffer, we do not need the link entry. Previously, I see this in previous rmda code, but it is moved.",
      "parentUuid": "4a79972a_b4c5168b",
      "revId": "0883676f7176cc4249a39643f44b8508c022a553",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8009e161_f3163f50",
        "filename": "lib/nvmf/transport.c",
        "patchSetId": 3
      },
      "lineNbr": 220,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2019-01-16T18:49:54Z",
      "side": 1,
      "message": "You don\u0027t need the else {} since the if returned.",
      "revId": "0883676f7176cc4249a39643f44b8508c022a553",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43895490_ab561066",
        "filename": "lib/nvmf/transport.c",
        "patchSetId": 3
      },
      "lineNbr": 220,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2019-01-16T20:40:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8009e161_f3163f50",
      "revId": "0883676f7176cc4249a39643f44b8508c022a553",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}