{
  "comments": [
    {
      "key": {
        "uuid": "600f4b09_d04694fb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 76
      },
      "lineNbr": 14,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-09-26T22:19:12Z",
      "side": 1,
      "message": "PRC \u003d\u003e RPC",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f3c111e9_5892a52c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 76
      },
      "lineNbr": 14,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-09-29T07:41:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "600f4b09_d04694fb",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6512b79e_b33755fb",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 76
      },
      "lineNbr": 538,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-09-26T22:19:12Z",
      "side": 1,
      "message": "should we only print out limits that are valid?\n\ni mean, if the user did not specify any QoS - I don\u0027t think we should issue this RPC\n\nand if they only specified one limit, we should only dump that limit here",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c9cabd79_41254833",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 76
      },
      "lineNbr": 538,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-09-29T07:41:44Z",
      "side": 1,
      "message": "OK. Got what you mean, so this is to dump what you has specified. If you has not enabled QoS, there is no need to show this method. If user enabled just one rate, just show that parameter. Thanks.",
      "parentUuid": "6512b79e_b33755fb",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2b2ec69d_971416ee",
        "filename": "lib/bdev/rpc/bdev_rpc.c",
        "patchSetId": 76
      },
      "lineNbr": 571,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-09-26T22:19:12Z",
      "side": 1,
      "message": "Error message may need to be modified here.  Maybe \"No rate limits specified.\"?\n\nHow does the user clear QoS limits?  By setting them to 0?",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e9e297f5_6a541a18",
        "filename": "lib/bdev/rpc/bdev_rpc.c",
        "patchSetId": 76
      },
      "lineNbr": 571,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-09-29T07:41:44Z",
      "side": 1,
      "message": "Yes. Setting 0 is a valid value. I will change it.",
      "parentUuid": "2b2ec69d_971416ee",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b3bf96c7_f8709931",
        "filename": "scripts/rpc.py",
        "patchSetId": 76
      },
      "lineNbr": 462,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-09-26T22:19:12Z",
      "side": 1,
      "message": "is the default\u003d-1 needed?\n\ni was thinking that since they are optional parameters, we don\u0027t need a default - that\u0027s how we do it with other optional parameters in spdk",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e4da0ee6_b858cdfc",
        "filename": "scripts/rpc.py",
        "patchSetId": 76
      },
      "lineNbr": 462,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-09-29T07:41:44Z",
      "side": 1,
      "message": "Yes. This is needed. Otherwise the default value is 0 if user does not input it. 0 has specific meaning to disable previously enabled rate limit. So with this default value, if user does not input, it just ignore the negative value. Thanks for noticing this one.",
      "parentUuid": "b3bf96c7_f8709931",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab93e893_fc75c863",
        "filename": "scripts/rpc.py",
        "patchSetId": 76
      },
      "lineNbr": 462,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-10-01T16:48:12Z",
      "side": 1,
      "message": "If the user does not input it, then we should not pass the parameter at all.",
      "parentUuid": "e4da0ee6_b858cdfc",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ca217e7c_166da311",
        "filename": "scripts/rpc/bdev.py",
        "patchSetId": 76
      },
      "lineNbr": 503,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2018-10-01T16:48:12Z",
      "side": 1,
      "message": "We can set default values to None here.  For example, see set_bdev_options() at beginning of this file.\n\nThis allows you to remove the default\u003d-1 in scripts/rpc.py.",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7ee1089_542c6b48",
        "filename": "scripts/rpc/bdev.py",
        "patchSetId": 76
      },
      "lineNbr": 503,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-10-02T01:37:00Z",
      "side": 1,
      "message": "I had this implementation at patch 68 and noticed the problem after upgrading to python3.\n\nYou can check below difference\n\nhttps://review.gerrithub.io/#/c/spdk/spdk/+/416511/68..76/scripts/rpc/bdev.pyhttps://review.gerrithub.io/#/c/spdk/spdk/+/416511/68..76/scripts/rpc/bdev.py\n\n\u003d\u003d The build error here as following \u003d\u003d\nSo that I change the parameter type to init and have the default value of -1 to detect if user does not set the related parameter. Line 513 (if rw_ios_per_sec \u003e\u003d 0:) is the key place to \ndetect whether user input a valid value (0: disable, \u003e0: enable \u0026 adjust).\n\nhttps://ci.spdk.io/spdk-jenkins/results/autotest-per-patch/builds/11587/archive/RBD_autotest/build.log\n\n 00:46:15\t# /var/jenkins/workspace/RBD_BlobFS_tests/RBD_autotest/spdk/scripts/rpc.py set_bdev_qos_limit Malloc0 --rw_ios_per_sec 20000\nTraceback (most recent call last):\n  File \"/var/jenkins/workspace/RBD_BlobFS_tests/RBD_autotest/spdk/scripts/rpc.py\", line 1785, in \u003cmodule\u003e\n    args.func(args)\n  File \"/var/jenkins/workspace/RBD_BlobFS_tests/RBD_autotest/spdk/scripts/rpc.py\", line 21, in rpc_cmd\n    func(*args, **kwargs)\n  File \"/var/jenkins/workspace/RBD_BlobFS_tests/RBD_autotest/spdk/scripts/rpc.py\", line 456, in set_bdev_qos_limit\n    rw_mbytes_per_sec\u003dargs.rw_mbytes_per_sec)\n  File \"/var/jenkins/workspace/RBD_BlobFS_tests/RBD_autotest/spdk/scripts/rpc/bdev.py\", line 515, in set_bdev_qos_limit\n    if rw_mbytes_per_sec \u003e\u003d 0:\nTypeError: \u0027\u003e\u003d\u0027 not supported between instances of \u0027NoneType\u0027 and \u0027int\u0027",
      "parentUuid": "ca217e7c_166da311",
      "revId": "fc05b1170be4f2cad7118f62428e9f5ed48cffb3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}