{
  "comments": [
    {
      "key": {
        "uuid": "8acc6a37_744658f5",
        "filename": "include/spdk_internal/bdev.h",
        "patchSetId": 22
      },
      "lineNbr": 212,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-01-27T12:50:50Z",
      "side": 1,
      "message": "outstanding is like unfinished. Hence \"active\" may be better word.",
      "range": {
        "startLine": 212,
        "startChar": 15,
        "endLine": 212,
        "endChar": 26
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a5687af9_8cf88d54",
        "filename": "include/spdk_internal/bdev.h",
        "patchSetId": 22
      },
      "lineNbr": 212,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-01-28T08:39:42Z",
      "side": 1,
      "message": "To be clear and also based on the below discussion, will update the comment as \"active channels on this bdev except the QoS channel\"",
      "parentUuid": "8acc6a37_744658f5",
      "range": {
        "startLine": 212,
        "startChar": 15,
        "endLine": 212,
        "endChar": 26
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "837b35ba_86864f89",
        "filename": "include/spdk_internal/bdev.h",
        "patchSetId": 22
      },
      "lineNbr": 216,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-01-27T12:50:50Z",
      "side": 1,
      "message": "it looks that two bdev_channels to an io_channel on a qos_thread is not working for the current SPDK.",
      "range": {
        "startLine": 215,
        "startChar": 1,
        "endLine": 216,
        "endChar": 39
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c6a36b4_4a8805c5",
        "filename": "include/spdk_internal/bdev.h",
        "patchSetId": 22
      },
      "lineNbr": 216,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-01-28T08:39:42Z",
      "side": 1,
      "message": "Yes. Through the public API like get_io_channel(), there will only be 1 io_channel on 1 thread. Thus 1 bdev channel within 1 io_channel. We add the channel_count as the count to determine the number of \"user\" created channels and also serve the purpose to indicate the proper time to cleanup the qos bdev channel when there is no \"user created\" channels.",
      "parentUuid": "837b35ba_86864f89",
      "range": {
        "startLine": 215,
        "startChar": 1,
        "endLine": 216,
        "endChar": 39
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5058a367_7bea99a0",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 22
      },
      "lineNbr": 1069,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-01-27T12:50:50Z",
      "side": 1,
      "message": "a io_channel was created by the previous call on the qos_thread. hence io_channel is not created by this call and the qos_channel is not linked to the io_channel.",
      "range": {
        "startLine": 1069,
        "startChar": 6,
        "endLine": 1069,
        "endChar": 31
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a79b4ccd_a357365b",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 22
      },
      "lineNbr": 1069,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-01-28T13:20:25Z",
      "side": 1,
      "message": "Yes. The QoS channel is not associated to any I/O channel. The basic idea here it not to link QoS channel to I/O channel as I/O channel can be get/put (create and destroy) at any that thus the QoS channel bound with an I/O channel will be not feasible. I\u0027ve also created patch https://review.gerrithub.io/#/c/396531/ to verify this for an arbitrary I/O channel to create and destroy while I/Os are active.",
      "parentUuid": "5058a367_7bea99a0",
      "range": {
        "startLine": 1069,
        "startChar": 6,
        "endLine": 1069,
        "endChar": 31
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "634105c1_119bcd58",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 22
      },
      "lineNbr": 1101,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-01-27T12:50:50Z",
      "side": 1,
      "message": "these looks speculative. these should be done on the same thread as unregister_poller().",
      "range": {
        "startLine": 1098,
        "startChar": 0,
        "endLine": 1101,
        "endChar": 25
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f3017cbc_717e6661",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 22
      },
      "lineNbr": 1101,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-01-28T13:20:25Z",
      "side": 1,
      "message": "Yes. Thanks for this suggestion.",
      "parentUuid": "634105c1_119bcd58",
      "range": {
        "startLine": 1098,
        "startChar": 0,
        "endLine": 1101,
        "endChar": 25
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7093a133_f9b92368",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 22
      },
      "lineNbr": 1111,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-01-27T12:50:50Z",
      "side": 1,
      "message": "It may be better to send  spdk_bdev_qos_channel_destroy() itself by message. I think this follow SPDK\u0027s way and looks more comprehensive.",
      "range": {
        "startLine": 1111,
        "startChar": 31,
        "endLine": 1111,
        "endChar": 62
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bbd2b0d8_03f9f2ff",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 22
      },
      "lineNbr": 1111,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-01-28T13:20:25Z",
      "side": 1,
      "message": "Good suggestion. Thanks.",
      "parentUuid": "7093a133_f9b92368",
      "range": {
        "startLine": 1111,
        "startChar": 31,
        "endLine": 1111,
        "endChar": 62
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fbf751c8_6c95d994",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 22
      },
      "lineNbr": 1119,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-01-27T12:50:50Z",
      "side": 1,
      "message": "only normal bdev_channel is linked to the io_channel directly on the qos_thread.",
      "range": {
        "startLine": 1119,
        "startChar": 1,
        "endLine": 1119,
        "endChar": 40
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4431e08e_96826355",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 22
      },
      "lineNbr": 1817,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2018-01-27T12:50:50Z",
      "side": 1,
      "message": "this cannot get qos_channel.",
      "range": {
        "startLine": 1817,
        "startChar": 2,
        "endLine": 1817,
        "endChar": 39
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d8a2a264_5efc779d",
        "filename": "lib/bdev/bdev.c",
        "patchSetId": 22
      },
      "lineNbr": 1817,
      "author": {
        "id": 1011207
      },
      "writtenOn": "2018-01-28T13:20:25Z",
      "side": 1,
      "message": "That\u0027s right. The reset related patch is created at https://review.gerrithub.io/#/c/393181/ and also for the UT related code. Thanks.",
      "parentUuid": "4431e08e_96826355",
      "range": {
        "startLine": 1817,
        "startChar": 2,
        "endLine": 1817,
        "endChar": 39
      },
      "revId": "06f4d1aa6d762cedbef2f1c0b99f9d9a4378f8c8",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}