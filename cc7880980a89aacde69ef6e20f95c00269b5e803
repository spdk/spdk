{
  "comments": [
    {
      "key": {
        "uuid": "e8fee7c9_daa922b1",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "These don\u0027t need to go on the stack, so you can make them #defines instead (the compiler is probably doing this automatically with optimization on anyway). In fact, I think those #defines belong in include/nvmf_spec.h.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb541ebb_e698b3b5",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-01-02T21:36:24Z",
      "side": 1,
      "message": "This check is probably redundant, since we will be explicitly checking against the required prefix later in this function.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8cf55a7c_2a2f3f1a",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 81,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "In order to use \u0027uuid\u0027, does the NQN need to start with \u0027nqn.2014-08.org.nvmexpress:\u0027 exactly? If so, you should strncmp with \u0027nqn.2014-08.org.nvmexpress:uuid\u0027 first to confirm that the string starts with exactly the right sequence. That simplifies this block from 82 to 89 considerably.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "31557bd5_75e2c252",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "You don\u0027t need the intermediate buffer here. Just pass an offset into the \u0027nqn\u0027 string.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9f640f77_f05b5cd8",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "The comments are a bit confusing here. I think you want to separate this comment from the strncmp below so it is clear that the comment applies to the next several checks, not just the one immediately below it. For this specific check, you can comment that \"NQNs must start with \u0027nqn.\u0027\".",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fedad414_551b87c2",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "You aren\u0027t really checking for a valid reverse domain. You\u0027re just checking (in combination with the next check) that it is in the form \u0027something.something:\u0027. I\u0027d make the comment say that.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24b48481_a4f4a7bb",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 120,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "You can use strchr here.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc08e9f7_19aad60c",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 120,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-01-02T21:36:24Z",
      "side": 1,
      "message": "I think we should be at least validating that the domain part contains only valid domain name characters (only \u0027a\u0027-\u0027z\u0027, \u0027A\u0027-\u0027Z\u0027, \u00270\u0027-\u00279\u0027, and \u0027-\u0027, unless we want to support IDN).  Also, \u0027-\u0027 is not allowed to be the first or last character of a label, and two \u0027.\u0027 should not be allowed in a row, etc.\n\nSome of the rules for DNS names are laid out here: https://tools.ietf.org/html/rfc1034#section-3.5",
      "parentUuid": "24b48481_a4f4a7bb",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a75d4c4_2eab0c38",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-01-02T21:36:24Z",
      "side": 1,
      "message": "I think this only accepts two dot-separated components, which is probably not what\u0027s intended by the spec.  It should accept any number of  dot-separated components, like \"com.example.test.world.hello\".  (In fact, a top-level domain name with no \u0027.\u0027 should probably also be accepted.)",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "349e61ff_7424c7ec",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 125,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "strchr here too",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a6621f13_add921e6",
        "filename": "test/unit/lib/nvmf/subsystem.c/subsystem_ut.c",
        "patchSetId": 4
      },
      "lineNbr": 249,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-01-02T21:36:24Z",
      "side": 1,
      "message": "This isn\u0027t the discovery controller NQN, so I think the comment above is wrong.\n\nIt would probably also be easier to understand what\u0027s going on if we unit test spdk_nvmf_valid_nqn() directly, rather than by calling it indirectly via spdk_nvmf_create_subsystem().  Can you split these new tests into a separate unit test function and make them call spdk_nvmf_valid_nqn() instead?",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c990281_11381f2c",
        "filename": "test/unit/lib/nvmf/subsystem.c/subsystem_ut.c",
        "patchSetId": 4
      },
      "lineNbr": 262,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-01-02T21:36:24Z",
      "side": 1,
      "message": "I think this case should probably be valid.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}