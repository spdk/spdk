{
  "comments": [
    {
      "key": {
        "uuid": "e8fee7c9_daa922b1",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "These don\u0027t need to go on the stack, so you can make them #defines instead (the compiler is probably doing this automatically with optimization on anyway). In fact, I think those #defines belong in include/nvmf_spec.h.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "60812e50_d899b845",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-01-05T19:25:36Z",
      "side": 1,
      "message": "thanks! done.",
      "parentUuid": "e8fee7c9_daa922b1",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb541ebb_e698b3b5",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-01-02T21:36:24Z",
      "side": 1,
      "message": "This check is probably redundant, since we will be explicitly checking against the required prefix later in this function.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a4def493_776a20d9",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 71,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-01-05T19:25:36Z",
      "side": 1,
      "message": "The reason I did this check is because when we check for yyyy-mm (line 110 in this patch) we use array indexing and I don\u0027t want to throw an index out of bounds error. I think that this check is still necessary.",
      "parentUuid": "bb541ebb_e698b3b5",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8cf55a7c_2a2f3f1a",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 81,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "In order to use \u0027uuid\u0027, does the NQN need to start with \u0027nqn.2014-08.org.nvmexpress:\u0027 exactly? If so, you should strncmp with \u0027nqn.2014-08.org.nvmexpress:uuid\u0027 first to confirm that the string starts with exactly the right sequence. That simplifies this block from 82 to 89 considerably.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f17949e_afe684b1",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 81,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-01-05T19:25:36Z",
      "side": 1,
      "message": "Yeah, the spec places that whole string in quotes when discussing this class of nqn. Thanks! That makes life a lot easier.",
      "parentUuid": "8cf55a7c_2a2f3f1a",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "31557bd5_75e2c252",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "You don\u0027t need the intermediate buffer here. Just pass an offset into the \u0027nqn\u0027 string.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b957ef80_46738bd9",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 96,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-01-05T19:25:36Z",
      "side": 1,
      "message": "thanks. done.",
      "parentUuid": "31557bd5_75e2c252",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9f640f77_f05b5cd8",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "The comments are a bit confusing here. I think you want to separate this comment from the strncmp below so it is clear that the comment applies to the next several checks, not just the one immediately below it. For this specific check, you can comment that \"NQNs must start with \u0027nqn.\u0027\".",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d947a43_9c71e3ac",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 105,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-01-05T19:25:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9f640f77_f05b5cd8",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fedad414_551b87c2",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "You aren\u0027t really checking for a valid reverse domain. You\u0027re just checking (in combination with the next check) that it is in the form \u0027something.something:\u0027. I\u0027d make the comment say that.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0c51a11_2d49a0a7",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-01-05T19:25:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fedad414_551b87c2",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24b48481_a4f4a7bb",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 120,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "You can use strchr here.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bc08e9f7_19aad60c",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 120,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-01-02T21:36:24Z",
      "side": 1,
      "message": "I think we should be at least validating that the domain part contains only valid domain name characters (only \u0027a\u0027-\u0027z\u0027, \u0027A\u0027-\u0027Z\u0027, \u00270\u0027-\u00279\u0027, and \u0027-\u0027, unless we want to support IDN).  Also, \u0027-\u0027 is not allowed to be the first or last character of a label, and two \u0027.\u0027 should not be allowed in a row, etc.\n\nSome of the rules for DNS names are laid out here: https://tools.ietf.org/html/rfc1034#section-3.5",
      "parentUuid": "24b48481_a4f4a7bb",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dbd8870d_cec5da6b",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 120,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-01-05T19:25:36Z",
      "side": 1,
      "message": "Thanks Daniel, I\u0027ll put together a loop for the pattern supplied in that rfc. The spec doesn\u0027t mention IDN, so I won\u0027t try to support it right now.",
      "parentUuid": "bc08e9f7_19aad60c",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a75d4c4_2eab0c38",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-01-02T21:36:24Z",
      "side": 1,
      "message": "I think this only accepts two dot-separated components, which is probably not what\u0027s intended by the spec.  It should accept any number of  dot-separated components, like \"com.example.test.world.hello\".  (In fact, a top-level domain name with no \u0027.\u0027 should probably also be accepted.)",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "03583fbc_64d90d99",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-01-05T19:25:36Z",
      "side": 1,
      "message": "I just read this last part of your comment after pushing my changes. I think you\u0027re right. I\u0027ll make that work in the next patchset.",
      "parentUuid": "9a75d4c4_2eab0c38",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "349e61ff_7424c7ec",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 125,
      "author": {
        "id": 1010531
      },
      "writtenOn": "2018-01-02T18:43:05Z",
      "side": 1,
      "message": "strchr here too",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fd5bae85_1a800587",
        "filename": "lib/nvmf/subsystem.c",
        "patchSetId": 4
      },
      "lineNbr": 125,
      "author": {
        "id": 1011223
      },
      "writtenOn": "2018-01-05T19:25:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "349e61ff_7424c7ec",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a6621f13_add921e6",
        "filename": "test/unit/lib/nvmf/subsystem.c/subsystem_ut.c",
        "patchSetId": 4
      },
      "lineNbr": 249,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-01-02T21:36:24Z",
      "side": 1,
      "message": "This isn\u0027t the discovery controller NQN, so I think the comment above is wrong.\n\nIt would probably also be easier to understand what\u0027s going on if we unit test spdk_nvmf_valid_nqn() directly, rather than by calling it indirectly via spdk_nvmf_create_subsystem().  Can you split these new tests into a separate unit test function and make them call spdk_nvmf_valid_nqn() instead?",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6c990281_11381f2c",
        "filename": "test/unit/lib/nvmf/subsystem.c/subsystem_ut.c",
        "patchSetId": 4
      },
      "lineNbr": 262,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-01-02T21:36:24Z",
      "side": 1,
      "message": "I think this case should probably be valid.",
      "revId": "cc7880980a89aacde69ef6e20f95c00269b5e803",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}