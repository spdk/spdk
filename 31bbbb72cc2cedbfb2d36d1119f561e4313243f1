{
  "comments": [
    {
      "key": {
        "uuid": "1d2619c6_7d1cf709",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 2
      },
      "lineNbr": 167,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-11-07T10:03:35Z",
      "side": 1,
      "message": "seems like we no longer set req-\u003etype to VIRTIO_BLK_T_IN anywhere.\n\nI know that VIRTIO_BLK_T_IN \u003d\u003d 0 and hence it\u0027s set automatically after zeroing the req struct, but that\u0027s a bit unintuitive.\n\nI\u0027d vote for a separate function for sending discards. That would make the code a bit clearer.",
      "revId": "31bbbb72cc2cedbfb2d36d1119f561e4313243f1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f058548e_d61639be",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 2
      },
      "lineNbr": 167,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2018-11-08T00:57:45Z",
      "side": 1,
      "message": "That will have some duplicated code section.",
      "parentUuid": "1d2619c6_7d1cf709",
      "revId": "31bbbb72cc2cedbfb2d36d1119f561e4313243f1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ff35ddf7_822c0ea1",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-11-07T10:48:54Z",
      "side": 1,
      "message": "VIRTIO_BLK_T_DISCARD is a standalone type, no masking is needed here (right now the result equals VIRTIO_BLK_T_DISCARD anyway).\n\nFrom the virtio spec:\n\n```\nThe type of the request is either a read (VIRTIO_BLK_T_IN), a write\n(VIRTIO_BLK_T_OUT), a discard (VIRTIO_BLK_T_DISCARD), a write zeroes\n(VIRTIO_BLK_T_WRITE_ZEROES) or a flush (VIRTIO_BLK_T_FLUSH).\n\n#define VIRTIO_BLK_T_OUT          1\n#define VIRTIO_BLK_T_DISCARD      11\n```",
      "range": {
        "startLine": 171,
        "startChar": 15,
        "endLine": 171,
        "endChar": 54
      },
      "revId": "31bbbb72cc2cedbfb2d36d1119f561e4313243f1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e52efce5_57a3cc17",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2018-11-08T00:57:45Z",
      "side": 1,
      "message": "No, Guest driver will also mark DISCARD and WRITE ZEROES with T_OUT flag.",
      "parentUuid": "ff35ddf7_822c0ea1",
      "range": {
        "startLine": 171,
        "startChar": 15,
        "endLine": 171,
        "endChar": 54
      },
      "revId": "31bbbb72cc2cedbfb2d36d1119f561e4313243f1",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}