{
  "comments": [
    {
      "key": {
        "uuid": "c77f0b21_2c8c83c6",
        "filename": "examples/nvme/arbitration/arbitration.c",
        "patchSetId": 6
      },
      "lineNbr": 706,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2019-01-28T08:32:24Z",
      "side": 1,
      "message": "The underlying strtol will potentially crash due to optarg \u003d\u003d NULL. The params specified in getops() do require a parameter and getops will fail straight away if they don\u0027t, but you\u0027re handling the default case here.\n\n$ ./arbitration -x -y",
      "range": {
        "startLine": 706,
        "startChar": 21,
        "endLine": 706,
        "endChar": 27
      },
      "revId": "1eb5c9a8383a1a3836c43b6b1de6a8c1185a1fde",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "21fd2c07_42fbb3e8",
        "filename": "examples/nvme/arbitration/arbitration.c",
        "patchSetId": 6
      },
      "lineNbr": 706,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2019-01-28T08:35:05Z",
      "side": 1,
      "message": "Handling the \u0027?\u0027 case might be enough to fix this.",
      "parentUuid": "c77f0b21_2c8c83c6",
      "range": {
        "startLine": 706,
        "startChar": 21,
        "endLine": 706,
        "endChar": 27
      },
      "revId": "1eb5c9a8383a1a3836c43b6b1de6a8c1185a1fde",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1de5c82b_70cd83a2",
        "filename": "examples/nvme/arbitration/arbitration.c",
        "patchSetId": 6
      },
      "lineNbr": 706,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-01-28T08:49:44Z",
      "side": 1,
      "message": "Hi Darek,\n\nThanks for critical feedback.\n\nWill you add explanation to \"Handling the \u0027?\u0027 case\" ?\n\nHow about adding NULL check (return -EINVAL before strtol/strtoll call) to spdk_strtol and spdk_strtoll?\n\nOr how about the following change?\n\n  if (optarg \u003d\u003d NULL) {\n    fprintf(stderr, \"optarg should not be NULL\\n\");\n    return -EINVAL;\n  } else {\n    val \u003d spdk_strtol(optarg, 10);\n    if (val \u003c 0) {\n      return val;\n    }\n  }\n\nThe former looks reasonable to me.",
      "parentUuid": "21fd2c07_42fbb3e8",
      "range": {
        "startLine": 706,
        "startChar": 21,
        "endLine": 706,
        "endChar": 27
      },
      "revId": "1eb5c9a8383a1a3836c43b6b1de6a8c1185a1fde",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6aba52d1_bbb0c614",
        "filename": "examples/nvme/arbitration/arbitration.c",
        "patchSetId": 6
      },
      "lineNbr": 706,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2019-01-28T09:55:23Z",
      "side": 1,
      "message": "\u003e How about adding NULL check (return -EINVAL before strtol/strtoll call) to spdk_strtol and spdk_strtoll?\n\nThat would work.\n\n\u003e Will you add explanation to \"Handling the \u0027?\u0027 case\" ?\n\nAll getopt cases that require an argument - those that are followed by a semicolon in the getopt() string - are guaranteed to have an optarg !\u003d NULL. getopt will apparently filter out all other cases and will provide you with a single \u0027?\u0027 op instead. The \u0027?\u0027 is the only case for which optarg \u003d\u003d NULL and you could fix the bug here by adding a separate case for it.\n\n\u003e Or how about the following change?\n\u003e  if (optarg \u003d\u003d NULL) { [...]\n\nIf you ask me, I\u0027d say the other options are better. I don\u0027t have any explanations though.",
      "parentUuid": "1de5c82b_70cd83a2",
      "range": {
        "startLine": 706,
        "startChar": 21,
        "endLine": 706,
        "endChar": 27
      },
      "revId": "1eb5c9a8383a1a3836c43b6b1de6a8c1185a1fde",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "abe895e6_50915ef2",
        "filename": "examples/nvme/arbitration/arbitration.c",
        "patchSetId": 6
      },
      "lineNbr": 706,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-01-29T02:58:12Z",
      "side": 1,
      "message": "Thanks for lecturing me! I just added \u0027?\u0027 case according to your suggestion.",
      "parentUuid": "6aba52d1_bbb0c614",
      "range": {
        "startLine": 706,
        "startChar": 21,
        "endLine": 706,
        "endChar": 27
      },
      "revId": "1eb5c9a8383a1a3836c43b6b1de6a8c1185a1fde",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}