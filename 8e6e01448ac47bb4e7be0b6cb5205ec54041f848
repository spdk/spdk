{
  "comments": [
    {
      "key": {
        "uuid": "33e19108_2f1816bc",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 143,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-03-01T16:26:17Z",
      "side": 1,
      "message": "Nitpick/future optimization: we could calculate the conversion factor via spdk_u32log2() once and stash it in struct virtio_blk_dev, then apply it via a single left shift here.",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e929cefe_9c1fc2b1",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 143,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-03-01T18:57:21Z",
      "side": 1,
      "message": "Ack. I\u0027ll leave this one for a separate patch.",
      "parentUuid": "33e19108_2f1816bc",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "238d2443_57298e72",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 143,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-03-02T13:31:18Z",
      "side": 1,
      "message": "... however, virtio-blk block size is not guaranteed to be a power of 2",
      "parentUuid": "e929cefe_9c1fc2b1",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b294dbb0_3ef15183",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 143,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-03-02T16:52:14Z",
      "side": 1,
      "message": "Hmm, right, this can probably stay then - it should not be a performance problem anyway since the divide by 512 should just turn into a fixed-count shift.",
      "parentUuid": "238d2443_57298e72",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68d3d2ce_f5b5954d",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 256,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-03-01T16:26:17Z",
      "side": 1,
      "message": "Is this cast necessary? void *io[32] should already decay to void **.",
      "range": {
        "startLine": 256,
        "startChar": 32,
        "endLine": 256,
        "endChar": 41
      },
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e7216c34_70173233",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 256,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-03-01T18:57:21Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "68d3d2ce_f5b5954d",
      "range": {
        "startLine": 256,
        "startChar": 32,
        "endLine": 256,
        "endChar": 41
      },
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "42b01a6b_e785079a",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 309,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-03-01T16:26:17Z",
      "side": 1,
      "message": "This is just strdup().",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7fcbd58_503e6817",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 309,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-03-01T18:57:21Z",
      "side": 1,
      "message": "And a memory leak, Ack",
      "parentUuid": "42b01a6b_e785079a",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23111e84_f0aacfbf",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 321,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-03-01T16:26:17Z",
      "side": 1,
      "message": "Maybe VirtioBlk or virtio-blk? \"BLK\" isn\u0027t an acronym, just a short form of \"block\" (unlike SCSI).",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8a13b284_2d4a5e5a",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 321,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-03-01T18:57:21Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "23111e84_f0aacfbf",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4eb618a8_74980537",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 389,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-03-01T16:26:17Z",
      "side": 1,
      "message": "We should probably sanity check that block_size % 512 \u003d\u003d 0 and block_size \u003e 0 and reject the device otherwise.",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "03855fc5_45023565",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 389,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-03-01T18:57:21Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "4eb618a8_74980537",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7f723d4_455b674b",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 392,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-03-01T16:26:17Z",
      "side": 1,
      "message": "Same here, capacity shouldn\u0027t be allowed to be 0, and capacity * 512 must be a multiple of block_size.",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e003143a_8334070c",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 392,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-03-01T18:57:21Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "b7f723d4_455b674b",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e209f1ee_5c049fe3",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 409,
      "author": {
        "id": 1010525
      },
      "writtenOn": "2018-03-01T16:26:17Z",
      "side": 1,
      "message": "Validate max_queues \u003e 0, probably?",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9a3abc5_390b0aa2",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 409,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-03-01T18:57:21Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e209f1ee_5c049fe3",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "11e3055b_9bc7412b",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 448,
      "author": {
        "id": 1011204
      },
      "writtenOn": "2018-01-03T08:05:35Z",
      "side": 1,
      "message": "I\u0027m upstreaming the vhost-user-blk host driver to QEMU, and added 2 extra vhost-user message to get virtio configuration space from slave target, so there is an optimization here in future for vhost-user devices.",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8aeda0c_2d20d775",
        "filename": "lib/bdev/virtio/bdev_virtio_blk.c",
        "patchSetId": 7
      },
      "lineNbr": 448,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2018-01-03T11:01:13Z",
      "side": 1,
      "message": "Yes, I saw that. I see a great potential in that feature and I\u0027m looking forward to it. We already have a virtio_dev_read_dev_config, but it works only for virtio-pci (and does nothing for virtio-user). Should we support older devices that don\u0027t implement these 2 extra vhost-user messages? (e.g. current SPDK vhost-blk target)",
      "parentUuid": "11e3055b_9bc7412b",
      "revId": "8e6e01448ac47bb4e7be0b6cb5205ec54041f848",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}