{
  "comments": [
    {
      "key": {
        "uuid": "f20b827b_e4bab087",
        "filename": "lib/bdev/compress/vbdev_compress.c",
        "patchSetId": 16
      },
      "lineNbr": 548,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-03-27T19:39:51Z",
      "side": 1,
      "message": "I\u0027m not sure about this call here.  The destruct callbacks get invoked at shutdown too so that the bdev modules can clean up after themselves for any bdevs that are still registered.  This would destroy the metadata on that bdev such that it can\u0027t be reloaded next time.  What am I missing?",
      "revId": "fc2ade11d7dbba626abe918923a59ed7625f9a96",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3c8ef49_47821a3d",
        "filename": "lib/bdev/compress/vbdev_compress.c",
        "patchSetId": 16
      },
      "lineNbr": 548,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2019-03-28T18:58:10Z",
      "side": 1,
      "message": "this patch only fixes delete bdev, the RPC.  It still has bugs but they are fixed later in the series.  In this patch the unload callback is only associated with an RPC delete",
      "parentUuid": "f20b827b_e4bab087",
      "revId": "fc2ade11d7dbba626abe918923a59ed7625f9a96",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e12f589c_94b3050a",
        "filename": "lib/bdev/compress/vbdev_compress.c",
        "patchSetId": 16
      },
      "lineNbr": 548,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-03-28T21:00:50Z",
      "side": 1,
      "message": "Oh - yeah, I see it now.  Never mind.",
      "parentUuid": "a3c8ef49_47821a3d",
      "revId": "fc2ade11d7dbba626abe918923a59ed7625f9a96",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bdc3dda9_39b3fef2",
        "filename": "lib/bdev/compress/vbdev_compress.c",
        "patchSetId": 16
      },
      "lineNbr": 552,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-03-27T19:39:51Z",
      "side": 1,
      "message": "similar to comment above - this callback doesn\u0027t only get called on hot remove - it also gets called during normal app shutdown\n\nor maybe you\u0027re including that as a \"hot remove\"?",
      "revId": "fc2ade11d7dbba626abe918923a59ed7625f9a96",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8830392b_329befd6",
        "filename": "lib/bdev/compress/vbdev_compress.c",
        "patchSetId": 16
      },
      "lineNbr": 552,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2019-03-28T18:58:10Z",
      "side": 1,
      "message": "yes, and you can see this is missing the vol unload which is another patch. When unload is added to this path a different callback is used so that the vol is not destroyed.  I was fixing things as I ran into them and putting them into the series to make smaller patches for review.  I can rework them and put all the delete, destroy and unload stuff in one patch?",
      "parentUuid": "bdc3dda9_39b3fef2",
      "revId": "fc2ade11d7dbba626abe918923a59ed7625f9a96",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88fe715e_1366fc0e",
        "filename": "lib/bdev/compress/vbdev_compress.c",
        "patchSetId": 16
      },
      "lineNbr": 552,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-03-28T21:00:50Z",
      "side": 1,
      "message": "This is fine for now.  Personally I think when people see \"hot remove callback\" they won\u0027t consider the shutdown case as \"hot remove\".  But we can fix the comment later.",
      "parentUuid": "8830392b_329befd6",
      "revId": "fc2ade11d7dbba626abe918923a59ed7625f9a96",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "201e2262_e051ad51",
        "filename": "lib/bdev/compress/vbdev_compress.c",
        "patchSetId": 16
      },
      "lineNbr": 1094,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-03-27T19:39:51Z",
      "side": 1,
      "message": "I don\u0027t think this check is needed.  We\u0027ve already checked the bdev is not NULL above.  If the bdev is not NULL, then the SPDK_CONTAINEROF operation won\u0027t return NULL either.  (Technically yes, there is one very specific non-NULL value for bdev that could result in SPDK_CONTAINEROF returning NULL - but that\u0027s not worth putting a check for it.)",
      "revId": "fc2ade11d7dbba626abe918923a59ed7625f9a96",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5dfec191_83560572",
        "filename": "lib/bdev/compress/vbdev_compress.c",
        "patchSetId": 16
      },
      "lineNbr": 1094,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2019-03-28T18:58:10Z",
      "side": 1,
      "message": "Sure I can remove it",
      "parentUuid": "201e2262_e051ad51",
      "revId": "fc2ade11d7dbba626abe918923a59ed7625f9a96",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "50dfc110_359b7515",
        "filename": "lib/bdev/compress/vbdev_compress.c",
        "patchSetId": 16
      },
      "lineNbr": 1103,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-03-27T19:39:51Z",
      "side": 1,
      "message": "liib \u003d\u003e lib",
      "revId": "fc2ade11d7dbba626abe918923a59ed7625f9a96",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0363adee_637e221c",
        "filename": "lib/bdev/compress/vbdev_compress.c",
        "patchSetId": 16
      },
      "lineNbr": 1103,
      "author": {
        "id": 1011289
      },
      "writtenOn": "2019-03-28T18:58:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "50dfc110_359b7515",
      "revId": "fc2ade11d7dbba626abe918923a59ed7625f9a96",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}