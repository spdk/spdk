{
  "comments": [
    {
      "key": {
        "uuid": "f3deb07c_acfd0df5",
        "filename": "lib/nvmf/tcp.c",
        "patchSetId": 1
      },
      "lineNbr": 869,
      "author": {
        "id": 1011275
      },
      "writtenOn": "2019-10-02T23:23:42Z",
      "side": 1,
      "message": "The previous meaning is that:\n1 If the sending queue is empty, and flush poller is registered, then we should \nunregistered it.\n2 If the sending queue is not empty, and there is no flush poller, we should start the poller.\n\nWith your change, we will always register/unregister, I think that the cost of poller register/unregister has come cost.",
      "range": {
        "startLine": 869,
        "startChar": 2,
        "endLine": 869,
        "endChar": 48
      },
      "revId": "d1da6953d53913a0125eb8607fda93fa99921513",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2baf77de_56f4fab9",
        "filename": "lib/nvmf/tcp.c",
        "patchSetId": 1
      },
      "lineNbr": 869,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-10-02T23:31:41Z",
      "side": 1,
      "message": "Yes, but for this case, the current syntax that we can call spdk_poller_unregister() without checking if poller is registered makes the code hard to understand.\n\nI think the code may be OK if we will see no poller for most cases or if we add spdk_poller_update().",
      "parentUuid": "f3deb07c_acfd0df5",
      "range": {
        "startLine": 869,
        "startChar": 2,
        "endLine": 869,
        "endChar": 48
      },
      "revId": "d1da6953d53913a0125eb8607fda93fa99921513",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e97be58e_484643b5",
        "filename": "lib/nvmf/tcp.c",
        "patchSetId": 1
      },
      "lineNbr": 869,
      "author": {
        "id": 1012251
      },
      "writtenOn": "2019-10-02T23:34:33Z",
      "side": 1,
      "message": "Or the following?\n\nif (rc \u003d\u003d 0) {\n  spdk_poller_register(\u0026tqpair-\u003eflush_poller);\n} else if (rc \u003d\u003d 1 \u0026\u0026 tqpair-\u003eflush_poller \u003d\u003d NULL) {\n  tqpair-\u003eflush_poller \u003d spdk_poller_register();\n}\n\nAnyway this is the good opportunity to match our idea :-)",
      "parentUuid": "2baf77de_56f4fab9",
      "range": {
        "startLine": 869,
        "startChar": 2,
        "endLine": 869,
        "endChar": 48
      },
      "revId": "d1da6953d53913a0125eb8607fda93fa99921513",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1248133_726f58f2",
        "filename": "lib/nvmf/tcp.c",
        "patchSetId": 1
      },
      "lineNbr": 869,
      "author": {
        "id": 1011275
      },
      "writtenOn": "2019-10-03T22:43:44Z",
      "side": 1,
      "message": "I am ok with this since if flush_poller \u003d\u003d NULL, even if you call spdk_poller_register, it will have no harm. The function directly return.",
      "parentUuid": "e97be58e_484643b5",
      "range": {
        "startLine": 869,
        "startChar": 2,
        "endLine": 869,
        "endChar": 48
      },
      "revId": "d1da6953d53913a0125eb8607fda93fa99921513",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}