{
  "comments": [
    {
      "key": {
        "uuid": "2ad181eb_2f15a7d7",
        "filename": "lib/vhost/vhost.c",
        "patchSetId": 4
      },
      "lineNbr": 1363,
      "author": {
        "id": 1011222
      },
      "writtenOn": "2019-01-18T20:05:33Z",
      "side": 1,
      "message": "how does a user of this know that one of the fn() calls failed?  normally when the foreach is completed, you get one last call with vdev \u003d\u003d NULL - but once we return here doesn\u0027t that mean the user never gets this final callback?\n\nsame for changes above",
      "revId": "b8f7c59ad0a6e228be4bc54b9e24d681831cbce9",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "82e77668_be063301",
        "filename": "lib/vhost/vhost.c",
        "patchSetId": 4
      },
      "lineNbr": 1363,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2019-01-21T10:56:48Z",
      "side": 1,
      "message": "This was added for a very specific foreach_session() use case where we need to modify the vdev after making sure all sessions meet some conditions. If at least one of them doesn\u0027t, then it would simply return -1 preventing the final fn() from being called.\n\nI know this function is still used for external events and not foreach_session(), but I wanted to change it in a separate commit and there are no cases where we return !\u003d 0 in current code.\n\nTo answer the original question:\n\n\u003e how does a user of this know that one of the fn() calls failed? \n\nSince it was the user that returned -1, he should additionally handle any work that would be done in the final callback.",
      "parentUuid": "2ad181eb_2f15a7d7",
      "revId": "b8f7c59ad0a6e228be4bc54b9e24d681831cbce9",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49ddf8ac_d1818f1f",
        "filename": "lib/vhost/vhost.c",
        "patchSetId": 4
      },
      "lineNbr": 1363,
      "author": {
        "id": 1011230
      },
      "writtenOn": "2019-01-21T13:39:32Z",
      "side": 1,
      "message": "\u003e I know this function is still used for external events and not foreach_session(), but I wanted to change it in a separate commit\n\nIf this going to be done soon, it is ok for me but if mentioned change will merged after 19.01 pls update_vhost_call_external_event_foreach documentation.\n\nBTW: as we are here: doc for spdk_vhost_dev_foreach_session() should mention that if fn return value \u003c 0 it will stop iterating.",
      "parentUuid": "82e77668_be063301",
      "revId": "b8f7c59ad0a6e228be4bc54b9e24d681831cbce9",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4376239_cd8374e2",
        "filename": "lib/vhost/vhost.c",
        "patchSetId": 4
      },
      "lineNbr": 1363,
      "author": {
        "id": 1011218
      },
      "writtenOn": "2019-01-22T16:21:22Z",
      "side": 1,
      "message": "\u003e If this going to be done soon, it is ok for me but if mentioned change will merged after 19.01 pls update_vhost_call_external_event_foreach documentation.\n\nIt is changed 3 patches later: \"vhost: untie devices from lcores\" https://review.gerrithub.io/c/spdk/spdk/+/439323\n\n\u003e BTW: as we are here: doc for spdk_vhost_dev_foreach_session() should mention that if fn return value \u003c 0 it will stop iterating.\n\nIt\u0027s true. I should definitely put more focus onto writing docs, but on the other hand I don\u0027t want to change them on every patch within this series. After all, we\u0027re refactoring a huge amount of code here.\n\nSo far I tried describing all the changes in commit messages, so that those patches are reviewable.\n\nI\u0027m actually thinking of putting all documentation updates in a single patch at the end of the series.",
      "parentUuid": "49ddf8ac_d1818f1f",
      "revId": "b8f7c59ad0a6e228be4bc54b9e24d681831cbce9",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}