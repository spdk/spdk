{
  "comments": [
    {
      "key": {
        "uuid": "2707071e_8d836c2b",
        "filename": "lib/ftl/ftl_band.h",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-05-08T07:57:18Z",
      "side": 1,
      "message": "What\u0027s the point of this change? LBA map is basically the whole band\u0027s metadata. Why do we need to split ftl_md? It\u0027s pretty small structure, let\u0027s keep it all together.",
      "range": {
        "startLine": 87,
        "startChar": 7,
        "endLine": 87,
        "endChar": 18
      },
      "revId": "e38beb598c7c36829b254ff1cd773bbc79ca841a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e0fde80_f09d87c5",
        "filename": "lib/ftl/ftl_band.h",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-05-08T08:32:13Z",
      "side": 1,
      "message": "As I wrote in commit message I will be extending this in next commit - you could look at https://review.gerrithub.io/c/spdk/spdk/+/453371/4/lib/ftl/ftl_band.h",
      "parentUuid": "2707071e_8d836c2b",
      "range": {
        "startLine": 87,
        "startChar": 7,
        "endLine": 87,
        "endChar": 18
      },
      "revId": "e38beb598c7c36829b254ff1cd773bbc79ca841a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94c39c72_fb1eb358",
        "filename": "lib/ftl/ftl_band.h",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-05-08T08:41:13Z",
      "side": 1,
      "message": "I still don\u0027t like the idea behind this division. I think it\u0027d make more sense to group together the map\u0027s state (so the state of the chunks, pending request list, etc.) instead.",
      "parentUuid": "9e0fde80_f09d87c5",
      "range": {
        "startLine": 87,
        "startChar": 7,
        "endLine": 87,
        "endChar": 18
      },
      "revId": "e38beb598c7c36829b254ff1cd773bbc79ca841a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "527b1a82_dc5e1232",
        "filename": "lib/ftl/ftl_band.h",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-05-08T08:53:56Z",
      "side": 1,
      "message": "I think that is more logical to group all related lba_map fields in one struct - then we can start changing our interface to operate directly on lba_map struct - this md struct is not needed in many places.",
      "parentUuid": "94c39c72_fb1eb358",
      "range": {
        "startLine": 87,
        "startChar": 7,
        "endLine": 87,
        "endChar": 18
      },
      "revId": "e38beb598c7c36829b254ff1cd773bbc79ca841a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fb91e6a_e3f9e0db",
        "filename": "lib/ftl/ftl_band.h",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 1015368
      },
      "writtenOn": "2019-05-08T09:14:37Z",
      "side": 1,
      "message": "I disagree. This just increases the number of structs, while not really helping with the readability - you have to to stuff like band-\u003emd.lba_map.map. Moreover, after the division ftl_md is left with just a couple of fields + ftl_lba_map (and you\u0027ll have to cross reference them both in a lot of cases, as you\u0027ll need ftl_md.dma_buf when operating on the lba_map).",
      "parentUuid": "527b1a82_dc5e1232",
      "range": {
        "startLine": 87,
        "startChar": 7,
        "endLine": 87,
        "endChar": 18
      },
      "revId": "e38beb598c7c36829b254ff1cd773bbc79ca841a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9ff5908a_7ef0d103",
        "filename": "lib/ftl/ftl_band.h",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 1015344
      },
      "writtenOn": "2019-05-08T09:38:31Z",
      "side": 1,
      "message": "Plan is to get rid of dma_buf and reduce chains like band-\u003emd.lba_map_state.pending_reads etc. ftl_md will have only sqe number, wr_cnt and a lot of stuff related with lba_map when we leave it as it is. We coulad also move lba_map directly to band and get rid of this ftl_md - we have dedicated structures describing layout of metadata on disk.",
      "parentUuid": "2fb91e6a_e3f9e0db",
      "range": {
        "startLine": 87,
        "startChar": 7,
        "endLine": 87,
        "endChar": 18
      },
      "revId": "e38beb598c7c36829b254ff1cd773bbc79ca841a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": true
    }
  ]
}